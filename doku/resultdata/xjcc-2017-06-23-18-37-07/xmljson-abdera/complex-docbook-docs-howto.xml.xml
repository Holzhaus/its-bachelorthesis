<ns0:article xmlns:ns0="http://docbook.org/ns/docbook" xmlns:ns1="http://www.w3.org/1999/xlink"><attributes version="5.0" xml:lang="en" /><children><ns0:info><children ns0:title="DocBook V5.0" /><children ns0:subtitle="The Transition Guide"><ns0:authorgroup><children><ns0:author><children ns0:personname="Jirka Kosek" /><children ns0:email="jirka@kosek.cz" /></ns0:author></children><children><ns0:author><children ns0:personname="Norman Walsh" /><children ns0:contrib="§convert4to5, proofreading" ns0:email="ndw@nwalsh.com" /></ns0:author></children><children><ns0:author><children ns0:personname="Dick Hamilton" /><children ns0:contrib="§changes-removed, customization, proofreading" ns0:email="rlhamilton@frii.com" /></ns0:author><ns0:othercredit><attributes class="other" otherclass="contributor" /><children ns0:personname="Michael(tm) Smith" /><children ns0:contrib="§dbxsl-ns" ns0:email="smith@sideshowbarker.net" /></ns0:othercredit></children></ns0:authorgroup></children><children ns0:pubdate="2009-06-16" /><children ns0:pubdate="2008-02-06" /><children ns0:pubdate="2007-10-28" /><children ns0:pubdate="2006-10-22" /><children ns0:pubdate="2006-05-16" /><children ns0:pubdate="2006-03-01" /><children ns0:pubdate="2005-12-28" /><children ns0:pubdate="2005-10-27" /></ns0:info></children><children ns0:para="This document is targeted at DocBook users who are considering&#10;switching from DocBook V4.x to DocBook V5.0. It describes&#10;differences between DocBook V4.x and V5.0 and provides some suggestions about&#10;how to edit and process DocBook V5.0 documents. There is&#10;also a section devoted to conversion of legacy documents from DocBook&#10;4.x to DocBook V5.0." /><children ns0:para="At the time this was written the current version of DocBook V5.0&#10;was 5.0. However, almost all of the information in this document is&#10;general and applies to any newer version of DocBook V5.0." /><children><ns0:section><attributes xml:id="introduction" /><children ns0:title="Introduction" /><children><ns0:para><children>The differences between DocBook V4.x and V5.0 are quite radical in
some aspects, but the basic idea behind DocBook is still the same, and
almost all element names are unchanged. Because of this it is very
easy to become familiar with DocBook V5.0 if you know any previous version of
DocBook. You can find a complete list of changes in</children><children ns0:citation="DB5SPEC" /></ns0:para></children><children><ns0:section><attributes xml:id="introduction-ns" /><children ns0:title="Finally in a namespace" /><children><ns0:para><children>All DocBook V5.0 elements are in the namespace</children><children ns0:uri="http://docbook.org/ns/docbook"><ns0:acronym><children>XML</children><children ns0:alt="Extensible&#10;Markup Language" /></ns0:acronym></children></ns0:para></children><children ns0:programlisting="&lt;article&gt;&#10;  &lt;title&gt;Sample article&lt;/title&gt;&#10;  &lt;para&gt;This is a really short article.&lt;/para&gt;&#10;&lt;/article&gt;" /><children ns0:para="The corresponding DocBook V5.0 article will look very similar:" /><children ns0:programlisting="&lt;article xmlns=&quot;http://docbook.org/ns/docbook&quot; …&gt;&#10;  &lt;title&gt;Sample article&lt;/title&gt;&#10;  &lt;para&gt;This is a really short article.&lt;/para&gt;&#10;&lt;/article&gt;" /><children><ns0:note><ns0:para><children>The namespace name</children><children ns0:uri="http://docbook.org/ns/docbook" /></ns0:para></ns0:note><ns0:para><children>The only change is the addition of a default namespace declaration
(</children><children ns0:code="xmlns=&quot;http://docbook.org/ns/docbook&quot;" /></ns0:para></children></ns0:section></children><children><ns0:section><attributes xml:id="introduction-rng" /><children ns0:title="Relaxing with DocBook" /><children ns0:para="For more than a decade, the DocBook schema was defined using a&#10;DTD. However, DTDs have serious limitations, and DocBook V5.0 is thus&#10;defined using a very powerful schema language called RELAX NG. Thanks&#10;to RELAX NG, it is now much easier to create customized versions of&#10;DocBook, and some content models are now cleaner and more&#10;precise." /><children ns0:para="Using RELAX NG has an impact on the document prolog. The following&#10;example shows the typical prolog of a DocBook V4.x document. The version of&#10;the DocBook DTD (in this case 4.5) is indicated in the document type&#10;declaration (!DOCTYPE) which points to a particular version of the&#10;DTD." /><children><ns0:example><attributes xml:id="ex.docbook45" /><children ns0:title="DocBook V4.5 document" /><children ns0:programlisting="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;!DOCTYPE article PUBLIC '-//OASIS//DTD DocBook XML V4.5//EN'&#10;                         'http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd'&gt;&#10;&lt;article lang=&quot;en&quot;&gt;&#10;  &lt;title&gt;Sample article&lt;/title&gt;&#10;  &lt;para&gt;This is a very short article.&lt;/para&gt;&#10;&lt;/article&gt;" /></ns0:example></children><children><ns0:para><children>In contrast, DocBook V5.0 does not depend on DTDs anymore. This
mean that there is no document type declaration and the version of DocBook
used is indicated with the</children><children><ns0:tag><attributes class="attribute" /><children>version</children></ns0:tag></children></ns0:para></children><children><ns0:example><attributes xml:id="ex.docbook5" /><children ns0:title="DocBook V5.0 document" /><children ns0:programlisting="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;article xmlns=&quot;http://docbook.org/ns/docbook&quot; version=&quot;5.0&quot; xml:lang=&quot;en&quot;&gt;&#10;  &lt;title&gt;Sample article&lt;/title&gt;&#10;  &lt;para&gt;This is a very short article.&lt;/para&gt;&#10;&lt;/article&gt;" /></ns0:example></children><children><ns0:para><children>As you can see, DocBook V5.0 is built on top of existing XML
standards as much as possible, for example the</children><children><ns0:tag><attributes class="attribute" /><children>lang</children></ns0:tag></children><children><ns0:tag><attributes class="attribute" ns1:href="http://www.w3.org/TR/REC-xml/#sec-lang-tag" /><children>xml:lang</children></ns0:tag></children></ns0:para></children><children ns0:para="Another fundamental change is that there is no direct indication&#10;of the schema used. Later in this document, you will learn how you can&#10;specify a schema to be used for document validation."><ns0:note><ns0:para><children>Although we recommend the RELAX NG schema for DocBook
V5.0, there are also DTD and W3C XML Schema versions available (see</children><children><ns0:xref><attributes linkend="schemas" /></ns0:xref></children></ns0:para></ns0:note></children></ns0:section></children><children><ns0:section><attributes xml:id="introduction-why-to-switch" /><children ns0:title="Why switch to DocBook V5.0?" /><children><ns0:itemizedlist><children><ns0:listitem><ns0:para ns0:emphasis="DocBook V4.x is feature frozen." /></ns0:listitem></children><children><ns0:listitem><ns0:para><children ns0:emphasis="DocBook V5.0 offers new functionality." /><children ns0:tag="info" /></ns0:para></ns0:listitem></children><children><ns0:listitem><ns0:para ns0:emphasis="DocBook V5.0 is more extensible." /></ns0:listitem></children><children><ns0:listitem><ns0:para><children ns0:emphasis="DocBook V5.0 is easier to customize." /><children><ns0:xref><attributes linkend="customizations" /></ns0:xref></children></ns0:para></ns0:listitem></children></ns0:itemizedlist><ns0:para><children>The simple answer is</children><children ns0:quote="because DocBook V5.0 is the&#10;future" /></ns0:para></children></ns0:section></children><children><ns0:section><attributes xml:id="introduction-schemas" /><children ns0:title="Schema jungle" /><children><ns0:para><children>Schemas for DocBook V5.0 are available in several formats at</children><children><ns0:link><attributes ns1:href="http://www.oasis-open.org/docbook/xml/5.0/" /></ns0:link></children><children><ns0:link><attributes ns1:href="http://docbook.org/xml/5.0/" /></ns0:link><ns0:xref><attributes linkend="t.schema-comparison" /></ns0:xref></children></ns0:para></children><children ns0:para="DTD and W3C XML Schema versions of the DocBook V5.0 grammar are provided&#10;as a convenience for users who want to use DocBook V5.0 with legacy tools&#10;that don't support RELAX NG. Authors are encouraged to switch to RELAX&#10;NG based tools as soon as possible, or at least to validate documents&#10;against the RELAX NG schema before further processing." /><children ns0:para="Some document constraints can't be expressed in schema languages&#10;like RELAX NG or W3C XML Schema. To check for these additional&#10;constraints DocBook V5.0 uses Schematron.  We recommend that you&#10;validate your document against both the RELAX NG and&#10;Schematron schemas."><ns0:table><attributes xml:id="t.schema-comparison" /><children ns0:title="Schema Comparison" /><children><ns0:tgroup><attributes cols="6" /><children><ns0:colspec><attributes colwidth="4*" /></ns0:colspec></children><children><ns0:colspec><attributes align="center" colwidth="1*" /></ns0:colspec></children><children><ns0:colspec><attributes align="center" colwidth="1*" /></ns0:colspec></children><children><ns0:colspec><attributes align="center" colwidth="1*" /></ns0:colspec></children><children><ns0:colspec><attributes align="center" colwidth="1*" /></ns0:colspec></children><children><ns0:colspec><attributes align="center" colwidth="1*" /></ns0:colspec><ns0:tbody><children><ns0:row><children ns0:entry="Basic document structure" /><children ns0:entry="YES" /><children ns0:entry="YES" /><children ns0:entry="YES" /><children ns0:entry="YES" /><children ns0:entry="YES" /></ns0:row></children><children><ns0:row><children ns0:entry="ID/IDREF datatypes" /><children ns0:entry="YES" /><children ns0:entry="YES" /><children ns0:entry="YES" /><children ns0:entry="YES" /><children ns0:entry="YES" /></ns0:row></children><children><ns0:row><children><ns0:entry><children>Datatypes</children><children><ns0:footnote><children><ns0:para><children>In a very few places RELAX NG specifies datatype
	  like number (mainly for length specifications) or
	  enumeration between</children><children ns0:literal="0" /><children ns0:literal="1" /></ns0:para></children><children ns0:para="In general those datatypes can be also supported in&#10;	  W3C XML Schema, but currently this schema is generated&#10;	  from DTD which lacks datatype information." /></ns0:footnote></children></ns0:entry></children><children ns0:entry="NO" /><children ns0:entry="NO" /><children ns0:entry="NO" /><children ns0:entry="YES" /><children ns0:entry="YES" /></ns0:row></children><children><ns0:row><children><ns0:entry><children>Co-occurrences</children><children><ns0:footnote><children><ns0:para><children>RELAX NG grammar enforces exclusivity of several
	elements. For example if you have</children><children ns0:tag="title" /><children ns0:tag="info" /><children ns0:tag="title" /><children ns0:tag="info" /></ns0:para></children><children ns0:para="On other places co-occurrences enforces particular&#10;	content model based on presence of specific attribute or&#10;	attribute value." /><children ns0:para="Please also note that in theory co-occurences can be&#10;	validated using Schematron, but the current DocBook schema&#10;	uses RELAX NG for these definitions. Schematron can be used&#10;	only for validation, whereas grammar based schemas like&#10;	RELAX NG are useful also for other purposes like guided editing." /></ns0:footnote></children></ns0:entry></children><children ns0:entry="NO" /><children ns0:entry="NO" /><children ns0:entry="NO" /><children ns0:entry="YES" /><children ns0:entry="YES" /></ns0:row></children><children><ns0:row><children ns0:entry="Hooks for MathML and SVG content" /><children ns0:entry="NO" /><children ns0:entry="NO" /><children ns0:entry="NO" /><children ns0:entry="YES" /><children ns0:entry="YES" /></ns0:row></children><children><ns0:row><children><ns0:entry><children>Link type integrity</children><children><ns0:footnote><ns0:para><children>Check whether ID/IDREF links are pointing to element
	of corresponding type. For example that</children><children ns0:tag="footnoteref" /><children ns0:tag="footnote" /></ns0:para></ns0:footnote></children></ns0:entry></children><children ns0:entry="NO" /><children ns0:entry="NO" /><children ns0:entry="YES" /><children ns0:entry="NO" /><children ns0:entry="YES" /></ns0:row></children><children><ns0:row><children><ns0:entry><children>Presence of</children><children><ns0:tag><attributes class="attribute" /><children>version</children></ns0:tag></children></ns0:entry></children><children ns0:entry="NO" /><children ns0:entry="NO" /><children ns0:entry="YES" /><children ns0:entry="NO" /><children ns0:entry="YES" /></ns0:row></children><children><ns0:row><children><ns0:entry><children>Miscellaneous checks</children><children><ns0:footnote ns0:para="For example consistency of segmented lists, only one&#10;	term inside term definition etc." /></children></ns0:entry></children><children ns0:entry="NO" /><children ns0:entry="NO" /><children ns0:entry="YES" /><children ns0:entry="NO" /><children ns0:entry="YES" /></ns0:row></children><children><ns0:row><children><ns0:entry><children>Element exclusions</children><children><ns0:footnote ns0:para="Prevents improper nesting of elements, like admonition&#10;	inside admonition." /></children></ns0:entry></children><children ns0:entry="NO" /><children ns0:entry="NO" /><children ns0:entry="YES" /><children ns0:entry="NO" /><children ns0:entry="YES" /></ns0:row></children></ns0:tbody><ns0:thead><ns0:row><children ns0:entry="Description" /><children ns0:entry="DTD" /><children ns0:entry="W3C XML Schema" /><children ns0:entry="W3C XML Schema + Schematron" /><children ns0:entry="RELAX NG" /><children ns0:entry="RELAX NG + Schematron/NVDL" /></ns0:row></ns0:thead></children></ns0:tgroup></children></ns0:table></children><children><ns0:section><attributes xml:id="schemas" /><children ns0:title="Where to get the schemas" /><children><ns0:para><children>The latest versions of schemas can be obtained from</children><children><ns0:link><attributes ns1:href="http://docbook.org/schemas/5x.html" /></ns0:link></children></ns0:para><ns0:variablelist><children><ns0:varlistentry><children ns0:term="RELAX NG schema" /><children><ns0:listitem><ns0:para><ns0:link><attributes ns1:href="http://docbook.org/xml/5.0/rng/docbook.rng" /></ns0:link></ns0:para></ns0:listitem></children></ns0:varlistentry></children><children><ns0:varlistentry><children ns0:term="RELAX NG schema in compact syntax" /><children><ns0:listitem><ns0:para><ns0:link><attributes ns1:href="http://docbook.org/xml/5.0/rng/docbook.rnc" /></ns0:link></ns0:para></ns0:listitem></children></ns0:varlistentry></children><children><ns0:varlistentry><children ns0:term="DTD" /><children><ns0:listitem><ns0:para><ns0:link><attributes ns1:href="http://docbook.org/xml/5.0/dtd/docbook.dtd" /></ns0:link></ns0:para></ns0:listitem></children></ns0:varlistentry></children><children><ns0:varlistentry><children ns0:term="W3C XML Schema" /><children><ns0:listitem><ns0:para><ns0:link><attributes ns1:href="http://docbook.org/xml/5.0/xsd/docbook.xsd" /></ns0:link></ns0:para></ns0:listitem></children></ns0:varlistentry></children><children><ns0:varlistentry><children ns0:term="Schematron schema with additional checks" /><children><ns0:listitem><ns0:para><ns0:link><attributes ns1:href="http://docbook.org/xml/5.0/sch/docbook.sch" /></ns0:link></ns0:para></ns0:listitem></children></ns0:varlistentry></children></ns0:variablelist></children><children><ns0:para><children>These schemas are also available from the mirror at</children><children><ns0:link><attributes ns1:href="http://www.oasis-open.org/docbook/xml/5.0/" /></ns0:link></children></ns0:para></children></ns0:section></children><children><ns0:section><attributes xml:id="docs" /><children ns0:title="DocBook documentation" /><children><ns0:note><ns0:para><children>Other parts of</children><children ns0:citetitle="DocBook: The Definitive&#10;Guide" /></ns0:para></ns0:note><ns0:para><children>Detailed documentation about each DocBook V5.0 element is
presented in</children><children><ns0:link><attributes ns1:href="http://docbook.org/tdg5/en/html/pt02.html" /><children>the reference part
of</children><children ns0:citetitle="DocBook: The Definitive Guide" /></ns0:link></children></ns0:para></children></ns0:section></children></ns0:section></children></ns0:section></children><children><ns0:section><attributes xml:id="tools" /><children ns0:title="Tool chain" /><children ns0:para="This section briefly describes tools and procedures to edit and&#10;process content stored in DocBook V5.0." /><children><ns0:section><attributes xml:id="editors" /><children ns0:title="Editing DocBook V5.0" /><children><ns0:para><children>Because DocBook is an XML-based format and XML is a text-based
format, you can use any text editor to create and edit DocBook V5.0
documents. However, using</children><children ns0:quote="dumb" /></ns0:para></children><children><ns0:section><attributes xml:id="editors-nxml" /><children ns0:title="Emacs and nXML" /><children><ns0:figure><attributes xml:id="f.emacs" /><children ns0:title="Emacs with nXML mode provides guided editing and validation" /><children><ns0:mediaobject><children><ns0:imageobject><attributes role="html" /><children><ns0:imagedata><attributes fileref="images/emacs.png" /></ns0:imagedata></children></ns0:imageobject></children><children><ns0:imageobject><attributes role="fo" /><children><ns0:imagedata><attributes fileref="images/emacs.png" width="100%" /></ns0:imagedata></children></ns0:imageobject></children></ns0:mediaobject></children></ns0:figure><ns0:para><children><ns0:link><attributes ns1:href="http://www.thaiopensource.com/nxml-mode/" /><children>nXML
mode</children></ns0:link></children><children><ns0:application><attributes ns1:href="http://www.gnu.org/software/emacs/emacs.html" /><children>GNU
Emacs</children></ns0:application></children></ns0:para></children><children><ns0:para><children>nXML uses a special configuration file named</children><children ns0:filename="schemas.xml" /><children ns0:filename="site-lisp/nxml/schema" /></ns0:para></children><children><ns0:note><ns0:para><children>Please note that nXML ships with a file named</children><children ns0:filename="docbook.rnc" /></ns0:para></ns0:note><ns0:programlisting><children>&lt;namespace ns="http://docbook.org/ns/docbook" uri="</children><children ns0:replaceable="/path/to/" /></ns0:programlisting></children><children><ns0:para><children>If you can't edit the global</children><children ns0:filename="schemas.xml" /></ns0:para></children><children><ns0:programlisting><children>&lt;locatingRules xmlns="http://thaiopensource.com/ns/locating-rules/1.0"&gt;
  &lt;namespace ns="http://docbook.org/ns/docbook" uri="</children><children ns0:replaceable="/path/to/" /></ns0:programlisting></children></ns0:section></children><children><ns0:section><attributes xml:id="editors-oxygen" /><children ns0:title="oXygen" /><children><ns0:para><ns0:application><attributes ns1:href="http://www.oxygenxml.com/" /><children>oXygen</children></ns0:application></ns0:para></children><children><ns0:figure><attributes xml:id="f.oxygen.open5" /><children ns0:title="DocBook V5.0 document opened in oXygen" /><children><ns0:mediaobject><ns0:imageobject><ns0:imagedata><attributes fileref="images/oxygen4.png" width="100%" /></ns0:imagedata></ns0:imageobject></ns0:mediaobject></children></ns0:figure></children><children><ns0:figure><attributes xml:id="f.oxygen.author.mode" /><children ns0:title="DocBook V5.0 document opened in oXygen in Author mode" /><children><ns0:mediaobject><ns0:imageobject><ns0:imagedata><attributes fileref="images/oxygen5.png" width="100%" /></ns0:imagedata></ns0:imageobject></ns0:mediaobject></children></ns0:figure></children></ns0:section></children><children><ns0:section><attributes xml:id="editors-xxe" /><children ns0:title="XML Mind XML editor" /><children><ns0:figure><attributes xml:id="f.xmlmind" /><children ns0:title="XML Mind XML Editor – feels almost like MS Word but real DocBook V5.0 markup is created" /><children><ns0:mediaobject><ns0:imageobject><ns0:imagedata><attributes fileref="images/xxe.png" width="100%" /></ns0:imagedata></ns0:imageobject></ns0:mediaobject></children></ns0:figure><ns0:para><ns0:application><attributes ns1:href="http://www.xmlmind.com/xmleditor/" /><children>XML
Mind XML editor</children></ns0:application></ns0:para></children><children><ns0:para><children>In order to use DocBook V5.0 in XXE you have to install
an add-on. Go to</children><children ns0:guibutton="OK" ns0:guilabel="DocBook&#10;5 configuration"><ns0:menuchoice><children ns0:guimenu="Options" /><children ns0:guimenuitem="Install&#10;Add-ons…" /></ns0:menuchoice></children></ns0:para></children></ns0:section></children></ns0:section></children><children><ns0:section><attributes xml:id="validators" /><children ns0:title="Validating DocBook V5.0" /><children ns0:para="If you are not using a RELAX NG-based validating editor when you&#10;create documents, we strongly recommend that you validate your&#10;documents against RELAX NG and Schematron schemas before processing&#10;them. Only after successful validation can you be sure that your&#10;document is really DocBook V5.0 and that processing tools will be able&#10;to process it correctly." /><children ns0:para="For validation you can use tools that support simultaneous RELAX NG and&#10;Schematron validation, or you can use NVDL to orchestrate validation using&#10;the two schemas." /><children><ns0:section><attributes xml:id="validators-rng-sch" /><children ns0:title="Using RELAX NG and Schematron" /><children><ns0:para><children>You can find a list of RELAX NG validators at</children><children><ns0:link><attributes ns1:href="http://relaxng.org/#validators" /></ns0:link></children></ns0:para></children><children><ns0:para><ns0:application><attributes ns1:href="https://msv.dev.java.net/" /><children>Sun 
Multi-Schema XML Validator (MSV)</children></ns0:application></ns0:para><ns0:procedure><children><ns0:step><ns0:para><children>Download</children><children ns0:filename="relames.zip"><ns0:link><attributes ns1:href="https://msv.dev.java.net/servlets/ProjectDocumentList?folderID=101" /></ns0:link></children></ns0:para></ns0:step></children><children><ns0:step ns0:para="Unpack the downloaded file into an arbitrary directory." /></children><children><ns0:step><children ns0:para="Validate your document using the following command:" /><children><ns0:note><ns0:para><children>The switch</children><children ns0:option="-Xss512K" /></ns0:para></ns0:note><ns0:screen><children ns0:command="java" /><children ns0:replaceable="/path/to/" /><children ns0:replaceable="/path/to/" /></ns0:screen></children></ns0:step></children></ns0:procedure></children><children><ns0:para><children>There is also an</children><children><ns0:link><attributes ns1:href="http://relaxed.vse.cz/docbookvalidator/" /><children>on-line DocBook V5.0
validator</children></ns0:link></children></ns0:para></children></ns0:section></children><children><ns0:section><children ns0:title="Using NVDL" /><children ns0:para="NVDL is a meta-schema language which can validate a document &#10;against several schemas. DocBook V5.0 comes with a NVDL&#10;schema which specifies that DocBook documents should be validated&#10;against both RELAX NG and Schematron schemas." /><children><ns0:para><children>You can find a list of NVDL validators at</children><children><ns0:link><attributes ns1:href="http://nvdl.org/" /></ns0:link></children><children><ns0:application><attributes ns1:href="http://www.oxygenxml.com/onvdl.html" /><children>oNVDL</children></ns0:application></children><children><ns0:application><attributes ns1:href="http://jnvdl.sourceforge.net" /><children>JNVDL</children></ns0:application></children></ns0:para></children><children><ns0:procedure><children ns0:title="oNVDL installation and usage" /><children><ns0:step><ns0:para><children>Download</children><children><ns0:filename><attributes ns1:href="http://www.oxygenxml.com/InstData/onvdl/onvdl-20070517.zip" /><children>onvdl-20070517.zip</children></ns0:filename></children></ns0:para></ns0:step></children><children><ns0:step ns0:para="Unpack the downloaded file into an arbitrary directory." /></children><children><ns0:step><children ns0:para="Validate your document using the following command:" /><children><ns0:screen><children ns0:command="java" /><children ns0:replaceable="/path/to/oNVDL/" /><children ns0:replaceable="/path/to/" /></ns0:screen></children></ns0:step></children></ns0:procedure></children><children><ns0:procedure><children ns0:title="JNVDL installation and usage" /><children><ns0:step><ns0:para><children>Download the latest release of JNVDL from</children><children><ns0:link><attributes ns1:href="http://sourceforge.net/project/showfiles.php?group_id=164464" /></ns0:link></children></ns0:para></ns0:step></children><children><ns0:step ns0:para="Unpack the downloaded file into an arbitrary directory." /></children><children><ns0:step><ns0:para><children>Modify file</children><children ns0:filename="jnvdl.bat" /><children ns0:command="java" ns0:filename="jnvdl.sh" ns0:option="-Xss512K" /></ns0:para></ns0:step></children><children><ns0:step><children ns0:para="On Windows systems, validate your document using the following command:" /><children><ns0:screen><children ns0:replaceable="/path/to/jnvdl/" /><children ns0:command="jnvdl" /><children ns0:replaceable="/path/to/" /></ns0:screen></children><children ns0:para="On Unix systems, validate your document using the following command:" /><children><ns0:screen><children ns0:replaceable="/path/to/jnvdl/" /><children ns0:command="jnvdl.sh" /><children ns0:replaceable="/path/to/" /></ns0:screen></children></ns0:step></children></ns0:procedure></children></ns0:section></children></ns0:section></children><children><ns0:section><attributes xml:id="processing" /><children ns0:title="Processing DocBook V5.0" /><children ns0:para="Part of DocBook's great success can be attributed to the&#10;availability of free&#10;tools that can be used to transform DocBook content into various&#10;target formats including HTML and PDF. The DocBook XSL Stylesheets are&#10;very popular tools." /><children><ns0:section><attributes xml:id="dbxsl" /><children ns0:title="DocBook XSL Stylesheets" /><children ns0:para="The DocBook stylesheets are designed to process content written in&#10;different versions of DocBook (for example 3.1 and 4.2). Recent&#10;versions of the stylesheets are also able to process DocBook V5.0&#10;with some limitations." /><children ns0:para="You can process DocBook V5.0 documents with the DocBook XSL&#10;stylesheets in exactly the same way you process DocBook V4.x documents.&#10;You do not need special software; you can stick to your preferred&#10;XSLT processor, be it Saxon, xsltproc, Xalan or whatever else (but see&#10;the note about the lost base URI below)." /><children ns0:para="During document processing, the stylesheets strip&#10;namespaces from DocBook V5.0 to get a document which will be&#10;very similar to DocBook V4.x. This is necessary because from the XSLT&#10;point of view, elements from different namespaces are distinct and cannot &#10;be easily processed by the same set of templates. This process is&#10;completely transparent to the user. If you are processing DocBook V5.0&#10;documents, the only difference is that you will see the following&#10;additional message:" ns0:screen="Note: namesp. cut : stripped namespace before processing&#10;Note: namesp. cut : processing stripped document" /><children ns0:para="Although you can successfully use the existing stylesheets to&#10;process DocBook V5.0, there are some limitations and unsupported&#10;features. The unsupported features include:"><ns0:itemizedlist><children><ns0:listitem ns0:para="general annotations;" /></children><children><ns0:listitem ns0:para="general XLink links on all elements." /></children></ns0:itemizedlist><ns0:note><ns0:para><children>During namespace stripping, the base URI of the document is
lost. This means that in rare situations, relatively referenced
resources like images or programlistings can be processed incorrectly.
The stylesheets attempt to compensate for this problem, but that is not always 
possible. When an XSLT processor other than Saxon or Xalan is used, a warning 
message is generated:</children><children ns0:screen="WARNING: cannot add @xml:base to node set root element. Relative paths may not work." /></ns0:para></ns0:note></children></ns0:section></children><children><ns0:section><attributes xml:id="dbxsl-ns" /><children ns0:title="DocBook XSL-NS Stylesheets" /><children><ns0:para><children>As you can see from reading the previous section, namespace
  stripping has limitations that will cause trouble in some
  situations. To overcome those limitations, Bob Stayton created a
  build system for taking the non-namespace-aware DocBook XSL
  stylesheets and generating namespace-aware versions from them.
  The DocBook</children><children><ns0:link><attributes ns1:href="http://docbook.sourceforge.net/release/xsl-ns/current/" /><children>XSL-NS stylesheets</children></ns0:link></children></ns0:para></children><children><ns0:para><children>The DocBook XSL-NS stylesheets are released side-by-side
  with the DocBook XSL stylesheets, as a separate</children><children><ns0:link><attributes ns1:href="https://sourceforge.net/project/showfiles.php?group_id=21935&amp;package_id=219178" /><children ns0:package="docbook-xsl-ns" /></ns0:link></children></ns0:para></children></ns0:section></children><children><ns0:section><attributes xml:id="dbxsl2" /><children ns0:title="XSLT 2.0 based re-implementation" /><children ns0:para="XSLT 1.0 is missing some important features. To work around&#10;these missing features, the current DocBook XSL stylesheets use some&#10;implementation-specific extensions.&#10;XSLT 2.0 adds many new and previously missing features into the language.&#10;A new set of DocBook stylesheets is being implemented based on XSLT 2.0&#10;to take advantage of these features and to fully support DocBook V5.0." /><children ns0:para="The XSLT 2.0 based stylesheets have many new features, including:"><ns0:itemizedlist><children><ns0:listitem ns0:para="seamless integration of profiling (conditional&#10;documents) with external bibliographies and&#10;glossaries;" /></children><children><ns0:listitem ns0:para="no need for (most) external extensions;" /></children><children><ns0:listitem ns0:para="internationalized indexes;" /></children><children><ns0:listitem ns0:para="easy to customize titlepage templates." /></children></ns0:itemizedlist></children><children ns0:para="The XSLT 2.0 based stylesheets are still under development.  At&#10;this writing, they only support HTML and chunked HTML output.  As time&#10;permits, the stylesheet developers will be adding other formats.  Since&#10;the stylesheets are developed in the limited free time the developers&#10;have, there's no specific schedule." /><children><ns0:para><children>There are not very many XSLT 2.0 implementations available.
But, if you want to try the new stylesheets, grab a snapshot of
the development version from</children><children><ns0:link><attributes ns1:href="http://docbook.sourceforge.net/snapshots/docbook-xsl2-snapshot.zip" /></ns0:link></children><children><ns0:link><attributes ns1:href="http://saxon.sf.net" /></ns0:link></children></ns0:para></children><children ns0:para="To transform a DocBook V5.0 document to a single HTML page use the command:" /><children><ns0:screen><children ns0:command="java" /><children ns0:replaceable="/path/to/" /><children ns0:replaceable="/path/to/" /></ns0:screen></children><children ns0:para="To transform a DocBook V5.0 document to a set of chunked HTML pages use the command:" /><children><ns0:screen><children ns0:command="java" /><children ns0:replaceable="/path/to/" /><children ns0:replaceable="/path/to/" /></ns0:screen></children></ns0:section></children></ns0:section></children></ns0:section></children><children><ns0:section><attributes xml:id="changes" /><children ns0:title="Markup changes" /><children><ns0:para><children>This section describes the most common markup changes
between DocBook V4.x and V5.0.
You can find a complete list of changes in</children><children ns0:citation="DB5SPEC" /></ns0:para></children><children><ns0:section><attributes xml:id="changes-linking" /><children ns0:title="Improved cross-referencing and linking" /><children><ns0:para><children>In DocBook V4.x the attribute</children><children><ns0:tag><attributes class="attribute" /><children>id</children></ns0:tag></children><children ns0:citation="XMLID"><ns0:tag><attributes class="attribute" /><children>xml:id</children></ns0:tag></children></ns0:para></children><children><ns0:para><children>Now you can use almost any inline element as the source of a link,
not just</children><children ns0:tag="xref" /><children ns0:tag="link" /></ns0:para></children><children ns0:programlisting="&lt;section id=&quot;dir&quot;&gt;&#10;  &lt;title&gt;DIR command&lt;/title&gt;&#10;  &lt;para&gt;...&lt;/para&gt;&#10;&lt;/section&gt;&#10;&#10;&lt;section id=&quot;ls&quot;&gt;&#10;  &lt;title&gt;LS command&lt;/title&gt;&#10;  &lt;para&gt;This command is a synonym for &lt;link linkend=&quot;dir&quot;&gt;&lt;command&gt;DIR&lt;/command&gt;&lt;/link&gt; command.&lt;/para&gt;&#10;&lt;/section&gt;" /><children ns0:para="is written in DocBook V5.0 as:" /><children ns0:programlisting="&lt;section xml:id=&quot;dir&quot;&gt;&#10;  &lt;title&gt;DIR command&lt;/title&gt;&#10;  &lt;para&gt;...&lt;/para&gt;&#10;&lt;/section&gt;&#10;&#10;&lt;section xml:id=&quot;ls&quot;&gt;&#10;  &lt;title&gt;LS command&lt;/title&gt;&#10;  &lt;para&gt;This command is a synonym for &lt;command linkend=&quot;dir&quot;&gt;DIR&lt;/command&gt; command.&lt;/para&gt;&#10;&lt;/section&gt;" /><children><ns0:para><children>The</children><children><ns0:tag><attributes class="attribute" /><children>linkend</children></ns0:tag></children><children><ns0:tag><attributes class="attribute" /><children>href</children></ns0:tag></children></ns0:para></children><children ns0:programlisting="&lt;article xmlns=&quot;http://docbook.org/ns/docbook&quot; &#10;         xmlns:xl=&quot;http://www.w3.org/1999/xlink&quot; version=&quot;5.0&quot;&gt;&#10;  &lt;title&gt;Test article&lt;/title&gt;&#10;&#10;  &lt;para&gt;&lt;application xl:href=&quot;http://www.gnu.org/software/emacs/emacs.html&quot;&gt;Emacs&lt;/application&gt; &#10;    is my favourite text editor.&lt;/para&gt;&#10;  …" /><children><ns0:para><children>The</children><children><ns0:tag><attributes condition="v4" /><children>ulink</children></ns0:tag></children><children><ns0:tag><attributes condition="v4" /><children>ulink</children></ns0:tag></children></ns0:para></children><children ns0:programlisting="&lt;ulink url=&quot;http://docbook.org&quot;&gt;DocBook site&lt;/ulink&gt;" /><children><ns0:para><children>you can now use</children><children ns0:tag="link" /></ns0:para></children><children ns0:programlisting="&lt;link xl:href=&quot;http://docbook.org&quot;&gt;DocBook site&lt;/link&gt;" /><children><ns0:para><children>XLink links may contain a fragment identifier, which you can 
use instead of</children><children><ns0:tag><attributes class="attribute" /><children>linkend</children></ns0:tag></children></ns0:para></children><children ns0:programlisting="&lt;command xl:href=&quot;#dir&quot;&gt;DIR&lt;/command&gt;" /><children><ns0:para><children>However XLink links are not checked during validation, while</children><children><ns0:tag><attributes class="attribute" /><children>xml:id</children></ns0:tag></children><children><ns0:tag><attributes class="attribute" /><children>linkend</children></ns0:tag></children></ns0:para></children></ns0:section></children><children><ns0:section><attributes xml:id="changes-renamed" /><children ns0:title="Renamed elements" /><children ns0:para="Some elements were renamed to better express their meaning or to&#10;reduce the total number of elements available in DocBook."><ns0:table><attributes xml:id="t.renamed" /><children ns0:title="Renamed elements" /><children><ns0:tgroup><attributes cols="2" /><children><ns0:thead><ns0:row><children ns0:entry="Old name" /><children ns0:entry="New name" /></ns0:row></ns0:thead></children><children><ns0:tbody><children><ns0:row><children><ns0:entry><ns0:tag><attributes condition="v4" /><children>sgmltag</children></ns0:tag></ns0:entry></children><children><ns0:entry ns0:tag="tag" /></children></ns0:row></children><children><ns0:row><children><ns0:entry><children><ns0:tag><attributes condition="v4" /><children>bookinfo</children></ns0:tag></children><children><ns0:tag><attributes condition="v4" /><children>articleinfo</children></ns0:tag></children><children><ns0:tag><attributes condition="v4" /><children>chapterinfo</children></ns0:tag></children><children><ns0:tag><attributes condition="nolink" /><children>*info</children></ns0:tag></children></ns0:entry></children><children><ns0:entry ns0:tag="info" /></children></ns0:row></children><children><ns0:row><children><ns0:entry><ns0:tag><attributes condition="v4" /><children>authorblurb</children></ns0:tag></ns0:entry></children><children><ns0:entry ns0:tag="personblurb" /></children></ns0:row></children><children><ns0:row><children><ns0:entry><children><ns0:tag><attributes condition="v4" /><children>collabname</children></ns0:tag></children><children><ns0:tag><attributes condition="v4" /><children>corpauthor</children></ns0:tag></children><children><ns0:tag><attributes condition="v4" /><children>corpcredit</children></ns0:tag></children><children><ns0:tag><attributes condition="v4" /><children>corpname</children></ns0:tag></children></ns0:entry></children><children><ns0:entry ns0:tag="orgname" /></children></ns0:row></children><children><ns0:row><children><ns0:entry><children><ns0:tag><attributes condition="v4" /><children>isbn</children></ns0:tag></children><children><ns0:tag><attributes condition="v4" /><children>issn</children></ns0:tag></children><children><ns0:tag><attributes condition="v4" /><children>pubsnumber</children></ns0:tag></children></ns0:entry></children><children><ns0:entry ns0:tag="biblioid" /></children></ns0:row></children><children><ns0:row><children><ns0:entry><children><ns0:tag><attributes condition="v4" /><children>lot</children></ns0:tag></children><children><ns0:tag><attributes condition="v4" /><children>lotentry</children></ns0:tag></children><children><ns0:tag><attributes condition="v4" /><children>tocback</children></ns0:tag></children><children><ns0:tag><attributes condition="v4" /><children>tocchap</children></ns0:tag></children><children><ns0:tag><attributes condition="v4" /><children>tocfront</children></ns0:tag></children><children><ns0:tag><attributes condition="v4" /><children>toclevel1</children></ns0:tag></children><children><ns0:tag><attributes condition="v4" /><children>toclevel2</children></ns0:tag></children><children><ns0:tag><attributes condition="v4" /><children>toclevel3</children></ns0:tag></children><children><ns0:tag><attributes condition="v4" /><children>toclevel4</children></ns0:tag></children><children><ns0:tag><attributes condition="v4" /><children>toclevel5</children></ns0:tag></children><children><ns0:tag><attributes condition="v4" /><children>tocpart</children></ns0:tag></children></ns0:entry></children><children><ns0:entry ns0:tag="tocdiv" /></children></ns0:row></children><children><ns0:row><children><ns0:entry><children><ns0:tag><attributes condition="v4" /><children>graphic</children></ns0:tag></children><children><ns0:tag><attributes condition="v4" /><children>graphicco</children></ns0:tag></children><children><ns0:tag><attributes condition="v4" /><children>inlinegraphic</children></ns0:tag></children><children><ns0:tag><attributes condition="v4" /><children>mediaobjectco</children></ns0:tag></children></ns0:entry></children><children><ns0:entry><children ns0:tag="mediaobject" /><children ns0:tag="inlinemediaobject" /></ns0:entry></children></ns0:row></children><children><ns0:row><children><ns0:entry><ns0:tag><attributes condition="v4" /><children>ulink</children></ns0:tag></ns0:entry></children><children><ns0:entry ns0:tag="link" /></children></ns0:row></children><children><ns0:row><children><ns0:entry><ns0:tag><attributes condition="v4" /><children>ackno</children></ns0:tag></ns0:entry></children><children><ns0:entry ns0:tag="acknowledgements" /></children></ns0:row></children></ns0:tbody></children></ns0:tgroup></children></ns0:table></children></ns0:section></children><children><ns0:section><attributes xml:id="changes-removed" /><children ns0:title="Removed elements" /><children><ns0:para><children>The following elements were removed from DocBook V5.0 without
direct replacements:</children><children><ns0:tag><attributes condition="v4" /><children>action</children></ns0:tag></children><children><ns0:tag><attributes condition="v4" /><children>beginpage</children></ns0:tag></children><children><ns0:tag><attributes condition="v4" /><children>highlights</children></ns0:tag></children><children><ns0:tag><attributes condition="v4" /><children>interface</children></ns0:tag></children><children><ns0:tag><attributes condition="v4" /><children>invpartnumber</children></ns0:tag></children><children><ns0:tag><attributes condition="v4" /><children>medialabel</children></ns0:tag></children><children><ns0:tag><attributes condition="v4" /><children>modespec</children></ns0:tag></children><children><ns0:tag><attributes condition="v4" /><children>structfield</children></ns0:tag></children><children><ns0:tag><attributes condition="v4" /><children>structname</children></ns0:tag></children></ns0:para><ns0:table><attributes xml:id="t.removed" /><children ns0:title="Recommended mapping for removed elements" /><children><ns0:tgroup><attributes cols="2" /><children><ns0:thead><ns0:row><children ns0:entry="Old name" /><children ns0:entry="Recommended mapping" /></ns0:row></ns0:thead></children><children><ns0:tbody><children><ns0:row><children><ns0:entry><ns0:tag><attributes condition="v4" /><children>action</children></ns0:tag></ns0:entry></children><children><ns0:entry><children>Use</children><children><ns0:computeroutput><children>&lt;</children><children ns0:tag="phrase" /></ns0:computeroutput></children></ns0:entry></children></ns0:row></children><children><ns0:row><children><ns0:entry><ns0:tag><attributes condition="v4" /><children>beginpage</children></ns0:tag></ns0:entry></children><children><ns0:entry><children>Remove:</children><children><ns0:tag><attributes condition="v4" /><children>beginpage</children></ns0:tag></children></ns0:entry></children></ns0:row></children><children><ns0:row><children><ns0:entry><ns0:tag><attributes condition="v4" /><children>highlights</children></ns0:tag></ns0:entry></children><children><ns0:entry><children>Use</children><children ns0:tag="abstract" /><children><ns0:tag><attributes condition="v4" /><children>highlights</children></ns0:tag></children><children ns0:tag="para" /><children ns0:tag="abstract" /></ns0:entry></children></ns0:row></children><children><ns0:row><children><ns0:entry><ns0:tag><attributes condition="v4" /><children>interface</children></ns0:tag></ns0:entry></children><children><ns0:entry><children>Use one of the</children><children ns0:quote="gui*" /><children ns0:tag="guibutton" /><children ns0:tag="guiicon" /><children ns0:tag="guilabel" /><children ns0:tag="guimenu" /><children ns0:tag="guimenuitem" /><children ns0:tag="guisubmenu" /></ns0:entry></children></ns0:row></children><children><ns0:row><children><ns0:entry><ns0:tag><attributes condition="v4" /><children>invpartnumber</children></ns0:tag></ns0:entry></children><children><ns0:entry><children>Use</children><children ns0:tag="productnumber"><ns0:computeroutput><children>&lt;</children><children ns0:tag="biblioid" /></ns0:computeroutput></children></ns0:entry></children></ns0:row></children><children><ns0:row><children><ns0:entry><ns0:tag><attributes condition="v4" /><children>medialabel</children></ns0:tag></ns0:entry></children><children><ns0:entry><children>Use</children><children ns0:replaceable="mediatype"><ns0:computeroutput><children>&lt;</children><children ns0:replaceable="mediatype" ns0:tag="citetitle" /></ns0:computeroutput></children><children><ns0:tag><attributes class="attvalue" /><children>cdrom</children></ns0:tag></children><children><ns0:tag><attributes class="attvalue" /><children>dvd</children></ns0:tag></children></ns0:entry></children></ns0:row></children><children><ns0:row><children><ns0:entry><ns0:tag><attributes condition="v4" /><children>modespec</children></ns0:tag></ns0:entry></children><children><ns0:entry><children>No longer needed.  The current processing model for</children><children ns0:tag="olink" /><children><ns0:tag><attributes condition="v4" /><children>modespec</children></ns0:tag></children></ns0:entry></children></ns0:row></children><children><ns0:row><children><ns0:entry><children><ns0:tag><attributes condition="v4" /><children>structfield</children></ns0:tag></children><children><ns0:tag><attributes condition="v4" /><children>structname</children></ns0:tag></children></ns0:entry></children><children><ns0:entry><children>Use</children><children ns0:tag="varname"><ns0:computeroutput><children>&lt;</children><children ns0:replaceable="structname or&#10;structfield" ns0:tag="varname" /></ns0:computeroutput></children><children ns0:tag="property" /><children><ns0:tag><attributes condition="v4" /><children>structfield</children></ns0:tag></children></ns0:entry></children></ns0:row></children></ns0:tbody></children></ns0:tgroup></children></ns0:table></children></ns0:section></children></ns0:section></children><children><ns0:section><attributes xml:id="convert4to5" /><children ns0:title="Converting DocBook V4.x documents to DocBook V5.0" /><children ns0:para="The DocBook V5.0 schema ships with an XSLT 1.0 stylesheet that&#10;is designed to transform valid DocBook V4.x documents to valid&#10;DocBook V5.0 documents." /><children><ns0:para><children>To convert your document,</children><children ns0:filename="doc.xml" /></ns0:para><ns0:procedure><children><ns0:step ns0:para="Check the validity of your DocBook XML V4.x document. The&#10;conversion tool assumes that the input document is valid. If the input&#10;document contains markup errors, the results will be unpredictable at&#10;best." /></children><children><ns0:step><ns0:para><children>Transform</children><children ns0:filename="doc.xml" /><children ns0:filename="newdoc.xml" /><children ns0:filename="db4-upgrade.xsl" /></ns0:para></ns0:step></children><children><ns0:step ns0:para="Check the validity of your DocBook XML V5.0 document against&#10;the DocBook V5.0 RELAX NG grammar." /></children></ns0:procedure></children><children ns0:para="In the vast majority of cases, the resulting document should&#10;be valid and your conversion process is finished." /><children ns0:para="If the document is not valid, please report the problem.&#10;(Over time, we'll have more experience with the sorts of things&#10;that can go wrong and we'll update this document to reflect that&#10;experience.)"><ns0:section><attributes xml:id="entities" /><children ns0:title="What About Entities?" /><children ns0:para="Using XSLT to transform existing documents to DocBook V5.0 has&#10;one potential disadvantage: it removes all entity references from &#10;your document." /><children ns0:para="If preserving entities is an important aspect of your production&#10;work flow, you will have to engage in a semi-manual process to&#10;preserve them."><ns0:procedure><children><ns0:step><ns0:para><children>Open your existing document using your favorite editing tool.
You must use a tool that</children><children ns0:emphasis="is not" /></ns0:para></ns0:step></children><children><ns0:step><ns0:para><children>Replace all occurrences of the entity references that you want
to preserve with some unique string. For example, if you want to preserve
“</children><children ns0:literal="&amp;Product;" /><children ns0:literal="[[[Product]]]" /><children ns0:literal="[[[Product]]]" /></ns0:para></ns0:step></children><children><ns0:step><ns0:para><children>Copy the document type declaration off of your document and save
it some place. The document type declaration is everything from
“</children><children ns0:literal="&lt;!DOCTYPE" /><children ns0:literal="]&gt;" /></ns0:para></ns0:step></children><children><ns0:step><ns0:para><children>Perform the conversion described in</children><children><ns0:xref><attributes linkend="convert4to5" /></ns0:xref></children></ns0:para></ns0:step></children><children><ns0:step ns0:para="Open the new document using your favorite editing tool. Replace&#10;all occurrences of the unique string you used to save the entity references&#10;with the corresponding entity references." /></children><children><ns0:step ns0:para="Paste the document type declaration that you saved onto the top&#10;of your new document." /></children><children><ns0:step><children><ns0:para><children>Remove the external identifier (the</children><children ns0:literal="PUBLIC" /><children ns0:literal="SYSTEM" /></ns0:para></children><children ns0:programlisting="&lt;!DOCTYPE book [&#10;&lt;!ENTITY someEntity &quot;some replacement text&quot;&gt;&#10;]&gt;" /><children ns0:para="is perfectly well-formed. If you don't remove the references to&#10;the DTD, then your parser will likely try to validate against DocBook&#10;V4.0 and that's not going to work. Alternatively, you could refer&#10;to the DocBook V5.0 DTD." /></ns0:step></children></ns0:procedure><ns0:section><attributes xml:id="extparsedentities" /><children ns0:title="External Parsed Entities" /><children ns0:para="External parsed entities, entities which load part of a document&#10;from another file, are a special case. These can often be replaced&#10;with XInclude elements." /><children><ns0:para><children>The Perl script</children><children ns0:filename="db4-entities.pl" /></ns0:para><ns0:procedure><children><ns0:step><ns0:para><children>Process your document with</children><children ns0:filename="db4-entities.pl" /></ns0:para></ns0:step></children><children><ns0:step><ns0:para><children>Process the XInclude version as described in</children><children><ns0:xref><attributes linkend="convert4to5" /></ns0:xref></children></ns0:para></ns0:step></children></ns0:procedure></children></ns0:section><ns0:tip><ns0:para><children>Steps 2 and 5 from previous procedure can be automated using the</children><children><ns0:link><attributes ns1:href="http://docbook.svn.sourceforge.net/viewvc/docbook/trunk/contrib/tools/cloak" /><children>cloak
script</children></ns0:link></children></ns0:para></ns0:tip></children></ns0:section></children></ns0:section></children><children><ns0:section><attributes xml:id="customizations" /><children ns0:title="Customizing DocBook V5.0" /><children><ns0:para><children>It's much easier to customize DocBook V5.0 than it was to
    customize earlier releases.  This is partly because RELAX NG
    provides better support for modifications than DTDs and partly
    because the DocBook schema is designed to take full advantage
    of the capabilities RELAX NG provides.
    This section describes the organization of the RELAX NG schema for
    DocBook, methods and examples for adding, removing, and modifying elements
    and attributes, and conventions for naming and versioning
    DocBook customizations.
    It assumes some familiarity with RELAX NG.  If you are unfamiliar
    with RELAX NG, you can find a tutorial introduction in</children><children ns0:citation="RNCTUT" /></ns0:para></children><children><ns0:section><attributes xml:id="relaxngorg" /><children ns0:title="DocBook RELAX NG schema organization" /><children><ns0:para><children>The DocBook RELAX NG schema is highly modular, using named
      patterns extensively.  Every element, attribute, attribute
      list, and enumeration has its own named pattern.  In addition,
      there are named patterns for logical combinations of elements
      and attributes.  These named patterns provide</children><children ns0:quote="hooks" /></ns0:para></children><children><ns0:para><children>An important design characteristic of the schema is that
      duplication is minimized.  This is done through the use of
      named patterns for common groupings that can be re-used.
      For example, the</children><children ns0:tag="imagedata" /><children ns0:tag="videodata" /><children><ns0:tag><attributes class="attribute" /><children>align</children></ns0:tag></children><children ns0:varname="db.halign.enumeration" /><children ns0:varname="db.videodata.align.enumeration" /><children ns0:varname="db.imagedata.align.enumeration" /><children ns0:varname="db.videodata.align.attribute" /><children ns0:varname="db.imagedata.align.attribute" /></ns0:para><ns0:section><attributes xml:id="patternnames" /><children ns0:title="Pattern Names" /><children><ns0:para><children>Because named patterns are used extensively, the RELAX NG schema uses
      several naming conventions.  These are:</children><children><ns0:itemizedlist><attributes spacing="compact" /><children><ns0:listitem><ns0:para><children>Names have two or more parts, separated by dots</children><children ns0:quote="." /></ns0:para></ns0:listitem></children><children><ns0:listitem><ns0:para><children>The first part of each name is the prefix</children><children ns0:quote="db" /></ns0:para></ns0:listitem></children><children><ns0:listitem><ns0:para><children>Each element has a named pattern in the form</children><children><ns0:varname><children>db.</children><children ns0:replaceable="elementname" /></ns0:varname></children><children><ns0:varname><children>db.</children><children ns0:replaceable="context.elementname" /></ns0:varname></children><children ns0:varname="db.figure.info" /><children ns0:tag="info" /><children ns0:replaceable="Context" ns0:tag="figure" /><children ns0:varname="db.cals.entrytbl.thead" /></ns0:para></ns0:listitem></children><children><ns0:listitem><ns0:para><children>Most attributes have a named pattern in the form</children><children><ns0:varname><children>db.</children><children ns0:replaceable="attributename" /></ns0:varname></children><children><ns0:varname><children>db.</children><children ns0:replaceable="context.attributename" /></ns0:varname></children><children ns0:varname="db.olink.localinfo.attribute" /><children><ns0:tag><attributes class="attribute" /><children>localinfo</children></ns0:tag></children><children ns0:tag="olink" /><children ns0:varname="db.effectivity.attributes" /></ns0:para></ns0:listitem></children><children><ns0:listitem><ns0:para><children>Each element has a named pattern for its attribute list in
            the form</children><children><ns0:varname><children>db.</children><children ns0:replaceable="elementname" /></ns0:varname></children><children><ns0:varname><children>db.</children><children ns0:replaceable="context.elementname" /></ns0:varname></children><children ns0:varname="db.html.table.attlist" /><children><ns0:tag><attributes condition="nolink" /><children>table</children></ns0:tag></children><children ns0:varname="db.cals.table.attlist" /><children><ns0:tag><attributes condition="nolink" /><children>table</children></ns0:tag></children></ns0:para></ns0:listitem></children><children><ns0:listitem><ns0:para><children>Each attribute that has enumerated values has a
            named pattern in the form</children><children><ns0:varname><children>db.</children><children ns0:replaceable="[context.]attributename" /></ns0:varname></children><children ns0:varname="db.verbatim.continuation.enumeration" /><children><ns0:tag><attributes class="attribute" /><children>continuation</children></ns0:tag></children><children ns0:tag="screen" /><children ns0:varname="db.class.enumeration" /><children><ns0:tag><attributes class="attribute" /><children>class</children></ns0:tag></children></ns0:para></ns0:listitem></children><children><ns0:listitem><children><ns0:para><children>There are several different groupings of elements and attributes.
            Here are the major ones:</children><children><ns0:variablelist><attributes spacing="compact" /><children><ns0:varlistentry><children ns0:term="inlines" /><children><ns0:listitem><ns0:para><children>Combinations of inline elements, for example,</children><children ns0:varname="db.error.inlines" /><children ns0:varname="db.errorcode" /><children ns0:varname="db.errortext" /></ns0:para></ns0:listitem></children></ns0:varlistentry></children><children><ns0:varlistentry><children ns0:term="blocks" /><children><ns0:listitem><ns0:para><children>Combinations of block elements, for example,</children><children ns0:varname="db.verbatim.blocks" /><children ns0:varname="db.programlisting" /><children ns0:varname="db.screen" /></ns0:para></ns0:listitem></children></ns0:varlistentry></children><children><ns0:varlistentry><children ns0:term="attributes" /><children><ns0:listitem><ns0:para><children>Combinations of attributes, for example,</children><children ns0:varname="db.effectivity.attributes" /><children><ns0:tag><attributes class="attribute" /><children>arch</children></ns0:tag></children><children><ns0:tag><attributes class="attribute" /><children>condition</children></ns0:tag></children><children><ns0:tag><attributes class="attribute" /><children>conformance</children></ns0:tag></children></ns0:para></ns0:listitem></children></ns0:varlistentry></children><children><ns0:varlistentry><children ns0:term="components" /><children><ns0:listitem><ns0:para><children>High level components of the schema, for example,</children><children ns0:varname="db.navigation.components" /><children ns0:varname="db.glossary" /><children ns0:varname="db.bibliography" /><children ns0:varname="db.index" /><children ns0:varname="db.toc" /><children ns0:tag="chapter" /><children ns0:tag="appendix" /><children ns0:tag="preface" /></ns0:para></ns0:listitem></children></ns0:varlistentry></children><children><ns0:varlistentry><children ns0:term="contentmodel" /><children><ns0:listitem><ns0:para><children>Shared content models, for example,</children><children ns0:varname="db.admonition.contentmodel" /><children ns0:tag="tip" /><children ns0:tag="warning" /><children ns0:tag="note" /></ns0:para></ns0:listitem></children></ns0:varlistentry></children></ns0:variablelist></children></ns0:para></children><children ns0:para="There are a couple of other groupings designed to minimize&#10;            duplication, but these are the most important." /></ns0:listitem></children></ns0:itemizedlist></children></ns0:para></children></ns0:section></children></ns0:section></children><children><ns0:section><attributes xml:id="customconsiderations" /><children ns0:title="General customization considerations" /><children ns0:para="Creating a customized schema is similar to&#10;    creating a customization layer for XSL.  The schema customization&#10;    layer is a new RELAX NG schema that defines your changes and&#10;    includes the standard docbook schema.  You then validate using&#10;    the schema customization as your schema." /><children><ns0:para><children><ns0:xref><attributes linkend="ex-empty" xrefstyle="select: label" /></ns0:xref></children><children><ns0:tag><attributes class="attribute" /><children>href</children></ns0:tag></children><children><ns0:example><attributes xml:id="ex-empty" /><children ns0:title="Empty customization file" /><children><ns0:programlisting><attributes language="rng" /><children>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;grammar xmlns:db="http://docbook.org/ns/docbook"
         ns="http://docbook.org/ns/docbook"
         xmlns="http://relaxng.org/ns/structure/1.0"&gt;
  &lt;include href="docbook.rng"/&gt;

  &lt;!-- redefinitions of named patterns --&gt;

&lt;/grammar&gt;</children></ns0:programlisting></children><children><ns0:programlisting><attributes language="rnc" /><children>namespace db = "http://docbook.org/ns/docbook"

include "docbook.rnc" inherit = db
# redefinitions of named patterns</children></ns0:programlisting></children></ns0:example><ns0:footnote><ns0:para><children>The examples in this section use</children><children ns0:filename="docbook.rng" ns0:uri="http://docbook.org/xml/5.0/rng/docbook.rng"><ns0:link><attributes ns1:href="http://www.oasis-open.org/committees/download.php/14809/xml-catalogs.html" /><children>XML
    catalogs</children></ns0:link></children></ns0:para></ns0:footnote><ns0:tag><attributes condition="nolink" /><children>include</children></ns0:tag></children></ns0:para></children></ns0:section></children><children><ns0:section><attributes xml:id="cust-elements" /><children ns0:title="Elements" /><children><ns0:section><attributes xml:id="cust-add-elements" /><children ns0:title="Adding elements" /><children ns0:para="Adding an element typically takes two definitions.&#10;        The first defines the new element and&#10;        its content model, and the second adds the&#10;        new element into the schema.  We'll show two examples." /><children><ns0:para><children><ns0:xref><attributes linkend="ex-add-element-1" xrefstyle="select: label" /></ns0:xref></children><children><ns0:tag><attributes condition="nolink" /><children>person</children></ns0:tag></children><children ns0:tag="author" /><children ns0:tag="author" /></ns0:para></children><children><ns0:para><children>The</children><children ns0:varname="db.author" /><children ns0:varname="dbx.person" /><children><ns0:tag><attributes condition="nolink" /><children>person</children></ns0:tag></children><children ns0:varname="db.author" /><children ns0:varname="dbx.person" /><children><ns0:tag><attributes class="attribute" /><children>combine</children></ns0:tag></children><children ns0:quote="choice"><ns0:tag><attributes class="attribute" /><children>combine</children></ns0:tag></children></ns0:para></children><children><ns0:example><attributes xml:id="ex-add-element-1" /><children ns0:title="Adding a new element by duplicating an existing one" /><children><ns0:programlisting><attributes language="rng" /><children>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;grammar xmlns:db="http://docbook.org/ns/docbook"
         ns="http://docbook.org/ns/docbook"
         xmlns="http://relaxng.org/ns/structure/1.0"&gt;
  &lt;include href="docbook.rng"/&gt;
  &lt;!-- define the new element --&gt;
  &lt;define name="dbx.person"&gt;
    &lt;element name="person"&gt;
        &lt;ref name="db.author.attlist"/&gt;
        &lt;ref name="db.credit.contentmodel"/&gt;
    &lt;/element&gt;
  &lt;/define&gt;
  &lt;!-- redefine the db.author pattern to allow db.person in
       the same places as db.author --&gt;
  &lt;define name="db.author" combine="choice"&gt;
    &lt;ref name="dbx.person"/&gt;
  &lt;/define&gt;
&lt;/grammar&gt;</children></ns0:programlisting></children><children><ns0:programlisting><attributes language="rnc" /><children>default namespace db = "http://docbook.org/ns/docbook"

include "docbook.rnc"
# define the new element
dbx.person =
  element person { db.author.attlist, db.credit.contentmodel }
# redefine the db.author pattern to allow db.person in
# the same places as db.author
db.author |= dbx.person</children></ns0:programlisting></children></ns0:example></children><children><ns0:para><children>The preceding method works well when you'd like a new element
      to be a clone or near-clone of an existing element.  It gives
      you complete control over the content model, but
      only limited control over where the element is allowed.  It
      works well when you want to allow the element in the same places
      as an existing element, and for this example that works
      nicely, since</children><children ns0:tag="author" /><children><ns0:tag><attributes condition="nolink" /><children>person</children></ns0:tag></children></ns0:para></children><children><ns0:para><children><ns0:xref><attributes linkend="ex-add-element-2" xrefstyle="select: label" /></ns0:xref></children><children><ns0:tag><attributes condition="nolink" /><children>register</children></ns0:tag></children><children><ns0:tag><attributes condition="nolink" /><children>instruction</children></ns0:tag></children><children><ns0:xref><attributes linkend="ex-add-element-2" xrefstyle="select: label" /></ns0:xref></children><children ns0:varname="dbx.asm.inlines" /><children ns0:varname="db.programming.inlines" /><children ns0:varname="db.os.inlines" /><children ns0:quote="clone"><ns0:xref><attributes linkend="ex-add-element-1" xrefstyle="select: label" /></ns0:xref></children></ns0:para></children><children><ns0:example><attributes xml:id="ex-add-element-2" /><children ns0:title="Adding new inline elements" /><children><ns0:programlisting><attributes language="rng" /><children>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;grammar xmlns:db="http://docbook.org/ns/docbook"
         ns="http://docbook.org/ns/docbook"
         xmlns="http://relaxng.org/ns/structure/1.0"&gt;
  &lt;include href="docbook.rng"/&gt;
  &lt;!-- define the new elements --&gt;
  &lt;define name="dbx.register"&gt;
    &lt;element name="register"&gt;
      &lt;text/&gt;
    &lt;/element&gt;
  &lt;/define&gt;
  &lt;define name="dbx.instruction"&gt;
    &lt;element name="instruction"&gt;
      &lt;text/&gt;
    &lt;/element&gt;
  &lt;/define&gt;
  &lt;!-- create a new pattern that contains the new inlines --&gt;
  &lt;define name="dbx.asm.inlines"&gt;
    &lt;choice&gt;
      &lt;ref name="dbx.register"/&gt;
      &lt;ref name="dbx.instruction"/&gt;
    &lt;/choice&gt;
  &lt;/define&gt;
  &lt;!-- add the new inlines to programming and os inlines --&gt;
    &lt;define name="db.programming.inlines" combine="choice"&gt;
      &lt;ref name="dbx.asm.inlines"/&gt;
    &lt;/define&gt;
    &lt;define name="db.os.inlines" combine="choice"&gt;
      &lt;ref name="dbx.asm.inlines"/&gt;
    &lt;/define&gt;
&lt;/grammar&gt;</children></ns0:programlisting></children><children><ns0:programlisting><attributes language="rnc" /><children>default namespace db = "http://docbook.org/ns/docbook"

include "docbook.rnc"
# define the new elements
dbx.register = element register { text }
dbx.instruction = element instruction { text }
# create a new pattern that contains the new inlines
dbx.asm.inlines = dbx.register | dbx.instruction
# add the new inlines to programming and os inlines
db.programming.inlines |= dbx.asm.inlines
db.os.inlines |= dbx.asm.inlines</children></ns0:programlisting></children></ns0:example></children></ns0:section></children><children><ns0:section><attributes xml:id="cust-delete-elements" /><children ns0:title="Deleting elements" /><children><ns0:para><children>Deleting elements is straightforward, but takes some
        care and planning.</children><children><ns0:xref><attributes linkend="ex-delete-element" xrefstyle="select: label" /></ns0:xref></children><children ns0:tag="important" ns0:varname="notAllowed" /><children><ns0:tag><attributes condition="nolink" /><children>include</children></ns0:tag></children></ns0:para></children><children><ns0:example><attributes xml:id="ex-delete-element" /><children ns0:title="Deleting an element" /><children><ns0:programlisting><attributes language="rng" /><children>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;grammar xmlns:db="http://docbook.org/ns/docbook"
         ns="http://docbook.org/ns/docbook"
         xmlns="http://relaxng.org/ns/structure/1.0"&gt;
  &lt;include href="docbook.rng"&gt;
    &lt;!-- redefine important element as notAllowed --&gt;
    &lt;define name="db.important"&gt;
      &lt;notAllowed/&gt;
    &lt;/define&gt;
  &lt;/include&gt;
&lt;/grammar&gt;</children></ns0:programlisting></children><children><ns0:programlisting><attributes language="rnc" /><children>namespace db = "http://docbook.org/ns/docbook"

include "docbook.rnc" inherit = db {
  # redefine important element as notAllowed
  db.important = notAllowed
}</children></ns0:programlisting></children></ns0:example><ns0:para><children>Be careful; If you delete an element that is a required part
        of another element's content model, you can make it
        impossible to create a valid document.
        For example, if you delete the</children><children ns0:tag="title" /><children ns0:tag="book" /><children ns0:tag="book" /><children ns0:tag="title" /></ns0:para></children></ns0:section></children><children><ns0:section><attributes xml:id="cust-modify-elements" /><children ns0:title="Customizing the content model of existing elements" /><children><ns0:para><children><ns0:xref><attributes linkend="ex-modify-element" xrefstyle="select: label" /></ns0:xref></children><children ns0:tag="author" /><children><ns0:tag><attributes condition="nolink" /><children>born</children></ns0:tag></children><children><ns0:tag><attributes condition="nolink" /><children>died</children></ns0:tag></children><children ns0:tag="author" /><children ns0:varname="db.person.author.contentmodel" /><children ns0:varname="db.org.author.contentmodel" /><children ns0:varname="db.person.author.contentmodel"><ns0:example><attributes xml:id="ex-modify-element" /><children ns0:title="Modifying the content model of an element" /><children><ns0:programlisting><attributes language="rng" /><children>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;grammar xmlns:db="http://docbook.org/ns/docbook"
         ns="http://docbook.org/ns/docbook"
         xmlns="http://relaxng.org/ns/structure/1.0"&gt;
  &lt;include href="docbook.rng"/&gt;

  &lt;define name="db.person.author.contentmodel" combine="interleave"&gt;
    &lt;interleave&gt;
      &lt;optional&gt;
        &lt;element name="born"&gt;
          &lt;ref name="db.date.contentmodel"/&gt;
        &lt;/element&gt;
      &lt;/optional&gt;
      &lt;optional&gt;
        &lt;element name="died"&gt;
          &lt;ref name="db.date.contentmodel"/&gt;
        &lt;/element&gt;
      &lt;/optional&gt;
    &lt;/interleave&gt;
  &lt;/define&gt;
&lt;/grammar&gt;</children></ns0:programlisting></children><children><ns0:programlisting><attributes language="rnc" /><children>default namespace = "http://docbook.org/ns/docbook"
namespace db = "http://docbook.org/ns/docbook"

include "docbook.rnc"

db.person.author.contentmodel &amp;=
  element born { db.date.contentmodel }?
  &amp; element died { db.date.contentmodel }?</children></ns0:programlisting></children></ns0:example></children></ns0:para></children><children><ns0:para><children>This modification will allow instances like this:</children><children ns0:programlisting="&lt;author&gt;&#10;  &lt;personname&gt;Babe Ruth&lt;/personname&gt;&#10;  &lt;born&gt;02/06/1895&lt;/born&gt;&#10;  &lt;died&gt;08/16/1948&lt;/died&gt;&#10;&lt;/author&gt;" ns0:varname="db.org.author.contentmodel" /><children ns0:programlisting="&lt;!-- INVALID --&gt;&#10;&lt;author&gt;&#10;  &lt;orgname&gt;Boston Red Sox&lt;/orgname&gt;&#10;  &lt;died&gt;1919&lt;/died&gt;&#10;  &lt;born&gt;2004&lt;/born&gt;&#10;&lt;/author&gt;" /></ns0:para></children></ns0:section></children></ns0:section></children><children><ns0:section><attributes xml:id="cust-attributes" /><children ns0:title="Attributes" /><children><ns0:section><attributes xml:id="cust-add-attributes" /><children ns0:title="Adding attributes" /><children><ns0:example><attributes xml:id="ex-add-attr" /><children ns0:title="Adding attributes" /><children><ns0:programlisting><attributes language="rng" /><children>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;grammar xmlns:db="http://docbook.org/ns/docbook"
         ns="http://docbook.org/ns/docbook"
         xmlns="http://relaxng.org/ns/structure/1.0"&gt;
  &lt;include href="docbook.rng"/&gt;

  &lt;define name="db.author.attlist" combine="interleave"&gt;
    &lt;interleave&gt;
      &lt;optional&gt;
        &lt;attribute name="born"&gt;
          &lt;ref name="db.date.contentmodel"/&gt;
        &lt;/attribute&gt;
      &lt;/optional&gt;
      &lt;optional&gt;
        &lt;attribute name="died"&gt;
          &lt;ref name="db.date.contentmodel"/&gt;
        &lt;/attribute&gt;
      &lt;/optional&gt;
    &lt;/interleave&gt;
  &lt;/define&gt;
&lt;/grammar&gt;</children></ns0:programlisting></children><children><ns0:programlisting><attributes language="rnc" /><children>namespace db = "http://docbook.org/ns/docbook"

include "docbook.rnc" inherit = db

db.author.attlist &amp;=
  attribute born { db.date.contentmodel }?
  &amp; attribute died { db.date.contentmodel }?</children></ns0:programlisting></children></ns0:example><ns0:para><children>The simplest way to add an attribute to a single element
        is to add it to the attlist pattern for that element.</children><children><ns0:xref><attributes linkend="ex-add-attr" xrefstyle="select: label" /></ns0:xref></children><children><ns0:tag><attributes class="attribute" /><children>born</children></ns0:tag></children><children><ns0:tag><attributes class="attribute" /><children>died</children></ns0:tag></children><children ns0:tag="author" ns0:varname="db.author.attlist" /><children ns0:quote="interleave"><ns0:tag><attributes class="attribute" /><children>combine</children></ns0:tag></children></ns0:para></children><children><ns0:para><children>Unlike</children><children><ns0:xref><attributes linkend="ex-modify-element" xrefstyle="select: label" /></ns0:xref></children><children ns0:tag="author"><ns0:xref><attributes linkend="ex-add-attr" xrefstyle="select: label" /></ns0:xref></children></ns0:para></children><children><ns0:para><children><ns0:xref><attributes linkend="ex-add-attr-2" xrefstyle="select: label" /></ns0:xref></children><children ns0:varname="db.person.author.contentmodel" /><children><ns0:example><attributes xml:id="ex-add-attr-2" /><children ns0:title="Adding attributes; alternate method" /><children><ns0:programlisting><attributes language="rng" /><children>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;grammar xmlns:db="http://docbook.org/ns/docbook"
         ns="http://docbook.org/ns/docbook"
         xmlns="http://relaxng.org/ns/structure/1.0"&gt;
  &lt;include href="docbook.rng"/&gt;
  &lt;!-- redefinitions of named patterns --&gt;
  &lt;define name="db.person.author.contentmodel" combine="interleave"&gt;
    &lt;interleave&gt;
      &lt;optional&gt;
        &lt;attribute name="born"&gt;
          &lt;ref name="db.date.contentmodel"/&gt;
        &lt;/attribute&gt;
      &lt;/optional&gt;
      &lt;optional&gt;
        &lt;attribute name="died"&gt;
          &lt;ref name="db.date.contentmodel"/&gt;
        &lt;/attribute&gt;
      &lt;/optional&gt;
    &lt;/interleave&gt;
  &lt;/define&gt;
&lt;/grammar&gt;</children></ns0:programlisting></children><children><ns0:programlisting><attributes language="rnc" /><children>namespace db = "http://docbook.org/ns/docbook"

include "docbook.rnc" inherit = db
# redefinitions of named patterns
db.person.author.contentmodel &amp;=
  attribute born { db.date.contentmodel }?
  &amp; attribute died { db.date.contentmodel }?</children></ns0:programlisting></children></ns0:example><ns0:tag><attributes condition="nolink" /><children>interleave</children></ns0:tag><ns0:xref><attributes linkend="ex-modify-element" xrefstyle="select: label" /></ns0:xref></children></ns0:para></children></ns0:section></children><children><ns0:section><attributes xml:id="cust-delete-attributes" /><children ns0:title="Deleting attributes" /><children><ns0:example><attributes xml:id="ex-delete-attr" /><children ns0:title="Deleting an attribute" /><children><ns0:programlisting><attributes language="rng" /><children>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;grammar xmlns:db="http://docbook.org/ns/docbook"
         ns="http://docbook.org/ns/docbook"
         xmlns="http://relaxng.org/ns/structure/1.0"&gt;
  &lt;include href="docbook.rng"&gt;
    &lt;define name="db.common.linking.attributes"&gt;
      &lt;empty/&gt;
    &lt;/define&gt;
  &lt;/include&gt;
&lt;/grammar&gt;</children></ns0:programlisting></children><children><ns0:programlisting><attributes language="rnc" /><children>namespace db = "http://docbook.org/ns/docbook"

include "docbook.rnc" inherit = db {
  db.common.linking.attributes = empty
}</children></ns0:programlisting></children></ns0:example><ns0:para><children>Deleting an attribute is similar to deleting an element,
        except that you use the RELAX NG</children><children ns0:varname="empty" /><children ns0:varname="notAllowed"><ns0:xref><attributes linkend="ex-delete-attr" xrefstyle="select: label" /></ns0:xref></children><children ns0:varname="db.common.linking.attributes" /><children ns0:varname="empty" /></ns0:para></children><children><ns0:para><children>Generally,</children><children ns0:varname="empty" /><children ns0:varname="notAllowed" /></ns0:para></children></ns0:section></children><children><ns0:section><attributes xml:id="cust-modify-attributes" /><children ns0:title="Changing permitted content of attributes" /><children><ns0:example><attributes xml:id="ex-modify-attr" /><children ns0:title="Deleting an attribute" /><children><ns0:programlisting><attributes language="rng" /><children>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;grammar xmlns:db="http://docbook.org/ns/docbook"
         ns="http://docbook.org/ns/docbook"
         xmlns="http://relaxng.org/ns/structure/1.0"&gt;
  &lt;include href="docbook.rng"/&gt;
  &lt;!-- add value to an enumeration --&gt;
  &lt;define name="db.spacing.enumeration" combine="choice"&gt;
    &lt;value&gt;large&lt;/value&gt;
  &lt;/define&gt;
&lt;/grammar&gt;</children></ns0:programlisting></children><children><ns0:programlisting><attributes language="rnc" /><children>namespace db = "http://docbook.org/ns/docbook"

include "docbook.rnc" inherit = db
# add value to an enumeration
db.spacing.enumeration |= "large"</children></ns0:programlisting></children></ns0:example><ns0:para><children><ns0:xref><attributes linkend="ex-modify-attr" xrefstyle="select: label" /></ns0:xref></children><children ns0:quote="large" ns0:varname="db.spacing.enumeration" /></ns0:para></children></ns0:section></children></ns0:section></children><children><ns0:section><attributes xml:id="cust-naming" /><children ns0:title="Naming and versioning DocBook customizations" /><children><ns0:para><children>DocBook V5.0 is not tightly coupled with some particular
validation technology like DTDs. This also means that DocBook V5.0
documents don't have to (and usually don't) start with a
document type declaration (&lt;!DOCTYPE…&gt;) to specify the schema
(DTD) to use. Instead, DocBook V5.0 instances can be easily
distinguished from other XML vocabularies by using elements in the</children><children ns0:uri="http://docbook.org/ns/docbook"><ns0:tag><attributes class="attribute" /><children>version</children></ns0:tag></children></ns0:para></children><children ns0:programlisting="&lt;book xmlns=&quot;http://docbook.org/ns/docbook&quot;&#10;      version=&quot;5.0&quot;&gt;&#10;  …&#10;&lt;/book&gt;" /><children ns0:para="Future versions of DocBook documents will start with the same&#10;markup, except the version number will be raised, for example to 5.1&#10;or 6.0.&#10;The namespace will remain the same until the semantics of the elements&#10;change in a backward incompatible way, which is very unlikely to happen." /><children><ns0:para><children>If you create a DocBook schema customization you must change the</children><children ns0:quote="official"><ns0:tag><attributes class="attribute" /><children>version</children></ns0:tag></children></ns0:para></children><children ns0:para="When you customize the schema, use the following syntax to&#10;identify your DocBook derivation:" /><children><ns0:programlisting><children ns0:replaceable="base_version" /><children ns0:replaceable="name" /><children ns0:replaceable="version" /></ns0:programlisting></children><children ns0:para="For example:" /><children ns0:programlisting="5.0-subset simplified-1.0&#10;5.0-variant ASMBook&#10;5.0-variant ASMBook-2006&#10;5.0-extension MathML-2.0 SVG-1.1" /><children ns0:para="The first part of the version identifier is the version number of the&#10;DocBook schema from which you derived your customization." /><children><ns0:para><children>If your schema is a proper subset, you can advertise this status
by using the</children><children ns0:literal="subset" /><children ns0:literal="extension" /><children ns0:literal="variant" /></ns0:para></children><children ns0:para="After these keywords you may add a whitespace separated list of&#10;customization identifiers. Each name may be optionally followed by its&#10;version number." /></ns0:section></children></ns0:section></children><children><ns0:bibliography><attributes xml:id="references" /><children><ns0:bibliomixed><children ns0:abbrev="RNCTUT" /><children ns0:title="RELAX NG Compact Syntax Tutorial"><ns0:bibliomisc><ns0:link><attributes ns1:href="http://relaxng.org/compact-tutorial-20030326.html" /></ns0:link></ns0:bibliomisc></children></ns0:bibliomixed></children><children><ns0:bibliomixed><children ns0:abbrev="NVDLTUT" /><children ns0:title="NVDL Tutorial"><ns0:bibliomisc><ns0:link><attributes ns1:href="http://jnvdl.sourceforge.net/tutorial.html" /></ns0:link></ns0:bibliomisc></children></ns0:bibliomixed></children><children><ns0:bibliomixed><children ns0:abbrev="XMLID" /><children ns0:title="xml:id Version 1.0"><ns0:bibliomisc><ns0:link><attributes ns1:href="http://www.w3.org/TR/xml-id/" /></ns0:link></ns0:bibliomisc></children></ns0:bibliomixed></children><children><ns0:bibliomixed><children ns0:abbrev="DB5SPEC" /><children ns0:title="The DocBook Schema"><ns0:bibliomisc><ns0:link><attributes ns1:href="http://www.docbook.org/specs/wd-docbook-docbook-5.0a1.html" /></ns0:link></ns0:bibliomisc></children></ns0:bibliomixed></children></ns0:bibliography><ns0:section><attributes xml:id="faq" /><children ns0:title="FAQ" /><children><ns0:qandaset><children><ns0:qandadiv><children ns0:title="Authoring" /><children><ns0:qandaentry><attributes xml:id="faq-authoring-schema-association" /><children><ns0:question ns0:para="How do I attach a schema to a DocBook V5.0 document when I do not&#10;want to use DTDs and !DOCTYPE?" /></children><children><ns0:answer ns0:para="There is no standard way of associating a RELAX NG schema with a&#10;document. Most tools provide some mechanism for performing this&#10;association, consult the documentation for your application. In some&#10;tools you must specify schema manually each time you want to&#10;edit/process your document." /></children></ns0:qandaentry></children><children><ns0:qandaentry><attributes xml:id="faq-authoring-general-entities" /><children><ns0:question><ns0:para><children>How do I use entities like</children><children><ns0:tag><attributes class="genentity" /><children>ndash</children></ns0:tag></children></ns0:para></ns0:question></children><children><ns0:answer><children ns0:para="Modern schema languages (including RELAX NG and W3X XML Schema)&#10;do not provide any means to define entities that can be used for easier&#10;typing of special characters. Some editors provide functions or&#10;special toolbars that allow you to easily pick necessary character&#10;and insert it into document as a raw Unicode character or a numeric&#10;character reference." /><children><ns0:para><children>Another possibility is to include entity definitions in the
prolog of your document.</children><children><ns0:link><attributes ns1:href="http://www.w3.org/2003/entities/" /><children>Entity definition
files</children></ns0:link></children></ns0:para></children><children ns0:programlisting="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;!DOCTYPE article [&#10;&lt;!ENTITY % isopub SYSTEM &quot;http://www.w3.org/2003/entities/iso8879/isopub.ent&quot;&gt;&#10;%isopub;&#10;]&gt;&#10;&lt;article xmlns=&quot;http://docbook.org/ns/docbook&quot; version=&quot;5.0&quot;&gt;&#10;&lt;title&gt;DocBook V5.0 &amp;ndash; the superb documentation format&lt;/title&gt;&#10;…" /><children ns0:para="For your convenience there is also flattened entity definition&#10;file which contains all entity definitions." /><children ns0:programlisting="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;!DOCTYPE article [&#10;&lt;!ENTITY % allent SYSTEM &quot;http://www.w3.org/2003/entities/2007/w3centities-f.ent&quot;&gt;&#10;%allent;&#10;]&gt;&#10;&lt;article xmlns=&quot;http://docbook.org/ns/docbook&quot; version=&quot;5.0&quot;&gt;&#10;&lt;title&gt;DocBook V5.0 &amp;ndash; the superb documentation format&lt;/title&gt;&#10;…" /></ns0:answer></children></ns0:qandaentry></children><children><ns0:qandaentry><attributes xml:id="faq-authoring-modularization" /><children><ns0:question ns0:para="How to modularize documents?" /></children><children><ns0:answer><ns0:para><children>You can use</children><children ns0:quote="xi"><ns0:link><attributes ns1:href="http://www.w3.org/TR/xinclude/" /><children>XInclude</children></ns0:link></children><children ns0:filename="docbookxi.rnc" /><children ns0:filename="docbook.rnc" /></ns0:para></ns0:answer></children></ns0:qandaentry></children><children><ns0:qandaentry><attributes xml:id="faq-authoring-validating-xincludes" /><children><ns0:question ns0:para="How to validate documents which are composed by XInclude?" /></children><children><ns0:answer><children ns0:para="If you are using XIncludes you should make sure that the final&#10;document after resolving all inclusions is valid DocBook V5.0&#10;instance. This means that all XIncludes should be processed before&#10;validation takes place. The following command can be used to enable&#10;XInclude processing in oNVDL." /><children><ns0:screen><children ns0:command="java" /><children ns0:replaceable="/path/to/oNVDL/" /><children ns0:replaceable="/path/to/" /></ns0:screen></children><children><ns0:para><children>For JNVDL you can use switch</children><children ns0:option="-xi" /></ns0:para></children></ns0:answer></children></ns0:qandaentry></children></ns0:qandadiv></children><children><ns0:qandadiv><children ns0:title="Stylesheets" /><children><ns0:qandaentry><attributes xml:id="faq-stylesheets-future" /><children><ns0:question ns0:para="Will the current DocBook XSL stylesheets (XSLT 1.0 based&#10;implementation) be maintained and improved in the future since work on&#10;a new XSLT 2.0 based implementation has started?" /></children><children><ns0:answer><children ns0:para="Yes, the current stylesheets (like 1.73.x) will be supported and&#10;improved further because they are very widely deployed and work with&#10;many existing XSLT processors." /><children ns0:para="Surely there will be a point in a future when all new development&#10;will be switched to the XSLT 2.0 based implementation. But this&#10;will not happen until all features of the current stylesheets are&#10;implemented in the new stylesheets, and until there is more than&#10;one usable XSLT 2.0 processor available." /></ns0:answer></children></ns0:qandaentry></children></ns0:qandadiv></children><children><ns0:qandadiv><children ns0:title="Schema customizations" /><children><ns0:qandaentry><attributes xml:id="faq-customization-mathml" /><children><ns0:question ns0:para="How can I extend the DocBook schema with MathML elements?" /></children><children><ns0:answer><children><ns0:para><children>The basic DocBook schema allows elements from the MathML namespace
to appear inside the</children><children ns0:tag="equation" /></ns0:para></children><children ns0:para="If you need strict validation of MathML content or guided&#10;editing for MathML, you can easily extend the base DocBook schema with&#10;the MathML schema."><ns0:procedure><children ns0:title="Extending the DocBook schema with the MathML schema" /><children><ns0:step><ns0:para><children>Download the MathML RELAX NG schema from</children><children ns0:filename="mathml"><ns0:link><attributes ns1:href="http://yupotan.sppd.ne.jp/relax-ng/mml2.html" /></ns0:link></children></ns0:para></ns0:step></children><children><ns0:step><children><ns0:para><children>Create a schema customization in compact syntax—</children><children ns0:filename="dbmathml.rnc" /></ns0:para></children><children><ns0:programlisting><attributes language="rnc" /><children>namespace html = "http://www.w3.org/1999/xhtml"
namespace mml = "http://www.w3.org/1998/Math/MathML"
namespace db = "http://docbook.org/ns/docbook"

include "/path/to/docbook.rnc" {
  db._any.mml = external "mathml/mathml2.rnc"
  db._any =
    element * - (db:* | html:* | mml:*) {
      (attribute * { text }
       | text
       | db._any)*
    }
}</children></ns0:programlisting></children><children><ns0:para><children>Or, alternatively, you can use the XML syntax of RELAX NG—</children><children ns0:filename="dbmathml.rng" /></ns0:para></children><children><ns0:programlisting><attributes language="rng" /><children>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;grammar xmlns="http://relaxng.org/ns/structure/1.0"&gt;

&lt;include href="/path/to/docbook.rng"&gt;
  &lt;define name="db._any.mml"&gt;
    &lt;externalRef href="mathml/mathml2.rng"/&gt;
  &lt;/define&gt;

  &lt;define name="db._any"&gt;
    &lt;element&gt;
      &lt;anyName&gt;
        &lt;except&gt;
          &lt;nsName ns="http://docbook.org/ns/docbook"/&gt;
          &lt;nsName ns="http://www.w3.org/1999/xhtml"/&gt;
          &lt;nsName ns="http://www.w3.org/1998/Math/MathML"/&gt;
        &lt;/except&gt;
      &lt;/anyName&gt;
      &lt;zeroOrMore&gt;
        &lt;choice&gt;
          &lt;attribute&gt;
            &lt;anyName/&gt;
          &lt;/attribute&gt;
          &lt;text/&gt;
          &lt;ref name="db._any"/&gt;
        &lt;/choice&gt;
      &lt;/zeroOrMore&gt;
    &lt;/element&gt;
  &lt;/define&gt;
&lt;/include&gt;

&lt;/grammar&gt;</children></ns0:programlisting></children></ns0:step></children><children><ns0:step><ns0:para><children>Now use the customized schema (</children><children ns0:filename="dbmathml.rnc" /><children ns0:filename="dbmathml.rng" /></ns0:para></ns0:step></children></ns0:procedure></children></ns0:answer></children></ns0:qandaentry></children><children><ns0:qandaentry><attributes xml:id="faq-customization-svg" /><children><ns0:question ns0:para="How can I extend the DocBook schema with SVG elements?" /></children><children><ns0:answer><children><ns0:para><children>The situation is the same as with MathML support. You can use
elements from the SVG namespace inside the</children><children ns0:tag="imageobject" /></ns0:para></children><children><ns0:procedure><children ns0:title="Extending the DocBook schema with the SVG schema" /><children><ns0:step><ns0:para><children>Download the SVG RELAX NG schema from</children><children ns0:filename="svg"><ns0:link><attributes ns1:href="http://www.w3.org/Graphics/SVG/1.1/rng/rng.zip" /></ns0:link></children></ns0:para></ns0:step></children><children><ns0:step><children><ns0:para><children>Create a schema customization in compact syntax—</children><children ns0:filename="dbsvg.rnc" /></ns0:para></children><children><ns0:programlisting><attributes language="rnc" /><children>namespace html = "http://www.w3.org/1999/xhtml"
namespace db = "http://docbook.org/ns/docbook"
namespace svg = "http://www.w3.org/2000/svg"

include "/path/to/docbook.rnc" {
  db._any.svg = external "svg/svg11.rnc"
  db._any =
    element * - (db:* | html:* | svg:*) {
      (attribute * { text }
       | text
       | db._any)*
    }
}</children></ns0:programlisting></children><children><ns0:para><children>Or, alternatively, you can use the XML syntax of RELAX NG—</children><children ns0:filename="dbsvg.rng" /></ns0:para></children><children><ns0:programlisting><attributes language="rng" /><children>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;grammar xmlns="http://relaxng.org/ns/structure/1.0"&gt;

&lt;include href="/path/to/docbook.rng"&gt;
  &lt;define name="db._any.svg"&gt;
    &lt;externalRef href="svg/svg11.rng"/&gt;
  &lt;/define&gt;

  &lt;define name="db._any"&gt;
    &lt;element&gt;
      &lt;anyName&gt;
        &lt;except&gt;
          &lt;nsName ns="http://docbook.org/ns/docbook"/&gt;
          &lt;nsName ns="http://www.w3.org/1999/xhtml"/&gt;
          &lt;nsName ns="http://www.w3.org/2000/svg"/&gt;
        &lt;/except&gt;
      &lt;/anyName&gt;
      &lt;zeroOrMore&gt;
        &lt;choice&gt;
          &lt;attribute&gt;
            &lt;anyName/&gt;
          &lt;/attribute&gt;
          &lt;text/&gt;
          &lt;ref name="db._any"/&gt;
        &lt;/choice&gt;
      &lt;/zeroOrMore&gt;
    &lt;/element&gt;
  &lt;/define&gt;
&lt;/include&gt;

&lt;/grammar&gt;</children></ns0:programlisting></children></ns0:step></children><children><ns0:step><ns0:para><children>Now use the customized schema (</children><children ns0:filename="dbsvg.rnc" /><children ns0:filename="dbsvg.rng" /></ns0:para></ns0:step></children></ns0:procedure></children></ns0:answer></children></ns0:qandaentry></children><children><ns0:qandaentry><attributes xml:id="faq-customization-mathml-svg" /><children><ns0:question ns0:para="Is it possible to use the previous two customizations for MathML&#10;and SVG together?" /></children><children><ns0:answer><children ns0:para="Yes, you can create a special schema customization that combines&#10;both MathML and SVG with the DocBook schema. In compact syntax, the merged&#10;schema is:" /><children><ns0:programlisting><attributes language="rnc" /><children>namespace html = "http://www.w3.org/1999/xhtml"
namespace mml = "http://www.w3.org/1998/Math/MathML"
namespace db = "http://docbook.org/ns/docbook"
namespace svg = "http://www.w3.org/2000/svg"

include "/path/to/docbook.rnc" {
  db._any.mml = external "mahtml/mathml2.rnc"
  db._any.svg = external "svg/svg11.rnc"
  db._any =
    element * - (db:* | html:* | mml:* | svg:*) {
      (attribute * { text }
       | text
       | db._any)*
    }
}</children></ns0:programlisting></children><children ns0:para="Or alternatively in the full RELAX NG syntax:" /><children><ns0:programlisting><attributes language="rng" /><children>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;grammar xmlns="http://relaxng.org/ns/structure/1.0"&gt;

&lt;include href="/path/to/docbook.rng"&gt;
  &lt;define name="db._any.mml"&gt;
    &lt;externalRef href="mathml/mathml2.rng"/&gt;
  &lt;/define&gt;

  &lt;define name="db._any.svg"&gt;
    &lt;externalRef href="svg/svg11.rng"/&gt;
  &lt;/define&gt;

  &lt;define name="db._any"&gt;
    &lt;element&gt;
      &lt;anyName&gt;
        &lt;except&gt;
          &lt;nsName ns="http://docbook.org/ns/docbook"/&gt;
          &lt;nsName ns="http://www.w3.org/1999/xhtml"/&gt;
          &lt;nsName ns="http://www.w3.org/1998/Math/MathML"/&gt;
          &lt;nsName ns="http://www.w3.org/2000/svg"/&gt;
        &lt;/except&gt;
      &lt;/anyName&gt;
      &lt;zeroOrMore&gt;
        &lt;choice&gt;
          &lt;attribute&gt;
            &lt;anyName/&gt;
          &lt;/attribute&gt;
          &lt;text/&gt;
          &lt;ref name="db._any"/&gt;
        &lt;/choice&gt;
      &lt;/zeroOrMore&gt;
    &lt;/element&gt;
  &lt;/define&gt;
&lt;/include&gt;

&lt;/grammar&gt;</children></ns0:programlisting></children></ns0:answer></children></ns0:qandaentry></children><children><ns0:qandaentry><attributes xml:id="faq-customization-links" /><children><ns0:question ns0:para="Are there any other examples of schema customization&#10;available?" /></children><children><ns0:answer><children ns0:para="Sure. Some of the are listed bellow:" /><children><ns0:itemizedlist><children><ns0:listitem><ns0:para><ns0:link><attributes ns1:href="http://www.w3.org/TR/xml-i18n-bp/#docbook-plus-its" /><children>Sample
customization of ITS and DocBook</children></ns0:link></ns0:para></ns0:listitem></children><children><ns0:listitem><ns0:para><ns0:link><attributes ns1:href="http://wiki.docbook.org/topic/DocbookSchemas" /><children>Examples on
DocBook WiKi</children></ns0:link></ns0:para></ns0:listitem></children></ns0:itemizedlist></children></ns0:answer></children></ns0:qandaentry></children></ns0:qandadiv></children><children><ns0:qandadiv><children ns0:title="Tool specific problems" /><children><ns0:qandaentry><attributes xml:id="faq-tools-xmlspy-xmlid" /><children><ns0:question><ns0:para><children>I'm using Altova XMLSpy to validate DocBook V5.0 instances
against the W3C XML Schema (</children><children ns0:filename="docbook.xsd"><ns0:tag><attributes class="attribute" /><children>xml:id</children></ns0:tag></children></ns0:para></ns0:question></children><children><ns0:answer><ns0:para><children>XMLSpy always uses its own bundled version of</children><children ns0:filename="xml.xsd"><ns0:tag><attributes class="attribute" /><children>xml:id</children></ns0:tag></children><children ns0:filename="xml.xsd" /></ns0:para></ns0:answer></children></ns0:qandaentry></children></ns0:qandadiv></children></ns0:qandaset></children></ns0:section></children></ns0:article>