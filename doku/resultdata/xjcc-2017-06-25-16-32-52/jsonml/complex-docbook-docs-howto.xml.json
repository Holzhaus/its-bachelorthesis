["article",{"xmlns":"http://docbook.org/ns/docbook","xmlns:xl":"http://www.w3.org/1999/xlink","version":"5.0","xml:lang":"en"},"\r\n",["info","\r\n",["title","DocBook V5.0"],"\r\n",["subtitle","The Transition Guide"],"\r\n\r\n",["authorgroup","\r\n",["author",["personname","Jirka Kosek"],"\r\n        ",["email","jirka@kosek.cz"]],"\r\n",["author",["personname","Norman Walsh"],"\r\n        ",["email","ndw@nwalsh.com"],"\r\n        ",["contrib","§convert4to5, proofreading"]],"\r\n",["author",["personname","Dick Hamilton"],"\r\n        ",["email","rlhamilton@frii.com"],"\r\n        ",["contrib","§changes-removed, customization, proofreading"]],"\r\n",["othercredit",{"class":"other","otherclass":"contributor"},["personname","Michael(tm) Smith"],"\r\n  ",["email","smith@sideshowbarker.net"],"\r\n  ",["contrib","§dbxsl-ns"],"\r\n"],"\r\n"],"\r\n\r\n",["pubdate","2009-06-16"],"\r\n",["pubdate","2008-02-06"],"\r\n",["pubdate","2007-10-28"],"\r\n",["pubdate","2006-10-22"],"\r\n",["pubdate","2006-05-16"],"\r\n",["pubdate","2006-03-01"],"\r\n",["pubdate","2005-12-28"],"\r\n",["pubdate","2005-10-27"],"\r\n\r\n"],"\r\n\r\n",["para","This document is targeted at DocBook users who are considering\r\nswitching from DocBook V4.x to DocBook V5.0. It describes\r\ndifferences between DocBook V4.x and V5.0 and provides some suggestions about\r\nhow to edit and process DocBook V5.0 documents. There is\r\nalso a section devoted to conversion of legacy documents from DocBook\r\n4.x to DocBook V5.0."],"\r\n\r\n",["para","At the time this was written the current version of DocBook V5.0\r\nwas 5.0. However, almost all of the information in this document is\r\ngeneral and applies to any newer version of DocBook V5.0.\r\n"],"\r\n\r\n",["section",{"xml:id":"introduction"},"\r\n",["title","Introduction"],"\r\n\r\n",["para","The differences between DocBook V4.x and V5.0 are quite radical in\r\nsome aspects, but the basic idea behind DocBook is still the same, and\r\nalmost all element names are unchanged. Because of this it is very\r\neasy to become familiar with DocBook V5.0 if you know any previous version of\r\nDocBook. You can find a complete list of changes in\r\n",["citation","DB5SPEC"],", here we will discuss only the most\r\nfundamental changes."],"\r\n\r\n",["section",{"xml:id":"introduction-ns"},"\r\n",["title","Finally in a namespace"],"\r\n\r\n",["para","All DocBook V5.0 elements are in the namespace\r\n",["uri","http://docbook.org/ns/docbook"],". ",["acronym","XML",["alt","Extensible\r\nMarkup Language"]]," namespaces are used to distinguish\r\nbetween different element sets. In the last few years, almost all new\r\nXML grammars have used their own namespace. It is easy to\r\ncreate compound documents that contain elements from different XML\r\nvocabularies. DocBook V5.0 is following this design rule. Using\r\nnamespaces in your documents is very easy. Consider this\r\nsimple article marked up in DocBook V4.5:"],"\r\n\r\n",["programlisting","<article>\r\n  <title>Sample article</title>\r\n  <para>This is a really short article.</para>\r\n</article>"],"\r\n\r\n",["para","The corresponding DocBook V5.0 article will look very similar:"],"\r\n\r\n",["programlisting","<article xmlns=\"http://docbook.org/ns/docbook\" …>\r\n  <title>Sample article</title>\r\n  <para>This is a really short article.</para>\r\n</article>"],"\r\n\r\n",["para","The only change is the addition of a default namespace declaration\r\n(",["code","xmlns=\"http://docbook.org/ns/docbook\""],") on the root\r\nelement. This declaration applies the namespace to the root element and\r\nall nested elements. Each\r\nelement is now uniquely identified by its local name and namespace."],"\r\n\r\n",["note","\r\n",["para","The namespace name ",["uri","http://docbook.org/ns/docbook"]," serves\r\nonly as an identifier. This resource is not fetched during processing\r\nof DocBook documents, and you are not required to have an Internet\r\nconnection during processing. If you access the namespace URI with a browser,\r\nyou will find a short explanatory document about the namespace. In the\r\nfuture this document will probably conform to (some version of) RDDL\r\nand provide pointers to related resources."],"\r\n"],"\r\n\r\n"],"\r\n\r\n",["section",{"xml:id":"introduction-rng"},"\r\n",["title","Relaxing with DocBook"],"\r\n\r\n",["para","For more than a decade, the DocBook schema was defined using a\r\nDTD. However, DTDs have serious limitations, and DocBook V5.0 is thus\r\ndefined using a very powerful schema language called RELAX NG. Thanks\r\nto RELAX NG, it is now much easier to create customized versions of\r\nDocBook, and some content models are now cleaner and more\r\nprecise."],"\r\n\r\n",["para","Using RELAX NG has an impact on the document prolog. The following\r\nexample shows the typical prolog of a DocBook V4.x document. The version of\r\nthe DocBook DTD (in this case 4.5) is indicated in the document type\r\ndeclaration (!DOCTYPE) which points to a particular version of the\r\nDTD."],"\r\n\r\n",["example",{"xml:id":"ex.docbook45"},"\r\n",["title","DocBook V4.5 document"],"\r\n",["programlisting","<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<!DOCTYPE article PUBLIC '-//OASIS//DTD DocBook XML V4.5//EN'\r\n                         'http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd'>\r\n<article lang=\"en\">\r\n  <title>Sample article</title>\r\n  <para>This is a very short article.</para>\r\n</article>"],"\r\n"],"\r\n\r\n",["para","In contrast, DocBook V5.0 does not depend on DTDs anymore. This\r\nmean that there is no document type declaration and the version of DocBook\r\nused is indicated with the ",["tag",{"class":"attribute"},"version"],"\r\nattribute instead."],"\r\n\r\n",["example",{"xml:id":"ex.docbook5"},"\r\n",["title","DocBook V5.0 document"],"\r\n",["programlisting","<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<article xmlns=\"http://docbook.org/ns/docbook\" version=\"5.0\" xml:lang=\"en\">\r\n  <title>Sample article</title>\r\n  <para>This is a very short article.</para>\r\n</article>"],"\r\n"],"\r\n\r\n",["para","As you can see, DocBook V5.0 is built on top of existing XML\r\nstandards as much as possible, for example the ",["tag",{"class":"attribute"},"lang"]," attribute is superseded by the standard\r\n",["tag",{"xl:href":"http://www.w3.org/TR/REC-xml/#sec-lang-tag","class":"attribute"},"xml:lang"]," attribute."],"\r\n\r\n",["para","Another fundamental change is that there is no direct indication\r\nof the schema used. Later in this document, you will learn how you can\r\nspecify a schema to be used for document validation."],"\r\n\r\n",["note","\r\n",["para","Although we recommend the RELAX NG schema for DocBook\r\nV5.0, there are also DTD and W3C XML Schema versions available (see ",["xref",{"linkend":"schemas"}],") for tools that do not yet support RELAX NG."],"\r\n"],"\r\n\r\n"],"\r\n\r\n",["section",{"xml:id":"introduction-why-to-switch"},"\r\n",["title","Why switch to DocBook V5.0?"],"\r\n\r\n",["para","The simple answer is ",["quote","because DocBook V5.0 is the\r\nfuture"],". Apart from this marketing blurb, there are also more\r\ntechnical reasons:"],"\r\n\r\n",["itemizedlist","\r\n",["listitem","\r\n",["para",["emphasis","DocBook V4.x is feature frozen."],"DocBook V4.5\r\nis the last version of DocBook in the V4.x series. Any new DocBook\r\ndevelopment, like the addition of new elements, will be done in\r\nDocBook V5.0. It is only matter of time before useful, new elements\r\nwill be added into DocBook V5.0, but they are not likely to be back\r\nported into DocBook V4.x. DocBook V4.x will be in maintenance mode and\r\nerrata will be published if necessary. "],"\r\n"],"\r\n",["listitem","\r\n",["para",["emphasis","DocBook V5.0 offers new functionality."],"\r\nDocBook V5.0 provides significant improvements over DocBook V4.x. For\r\nexample there is general markup for annotations, a new and flexible\r\nsystem for linking, and unified markup for information sections using\r\nthe ",["tag","info"]," element."],"\r\n"],"\r\n",["listitem","\r\n",["para",["emphasis","DocBook V5.0 is more extensible."]," Having\r\nDocBook V5.0 in a separate namespace allows you to easily mix DocBook\r\nmarkup with other XML-based languages like SVG, MathML, XHTML or even\r\nFooBarML."],"\r\n"],"\r\n",["listitem","\r\n",["para",["emphasis","DocBook V5.0 is easier to customize."]," RELAX\r\nNG offers many powerful constructs that make customization much easier\r\nthan it would be using a DTD (see ",["xref",{"linkend":"customizations"}],")."],"\r\n"],"\r\n"],"\r\n\r\n"],"\r\n\r\n",["section",{"xml:id":"introduction-schemas"},"\r\n",["title","Schema jungle"],"\r\n\r\n",["para","Schemas for DocBook V5.0 are available in several formats at\r\n",["link",{"xl:href":"http://www.oasis-open.org/docbook/xml/5.0/"}]," (or the\r\nmirror at ",["link",{"xl:href":"http://docbook.org/xml/5.0/"}],").\r\nOnly the RELAX NG schema is normative\r\nand it is preferred over the other schema languages.  However, for your\r\nconvenience there are also DTD and W3C XML Schema versions provided for DocBook\r\nV5.0. But please note that neither the DTD nor the W3C XML schema are able to\r\ncapture all the constraints of DocBook V5.0. This mean that a\r\ndocument that validates against the DTD or XML schema is not necessarily\r\nvalid against the RELAX NG schema and thus may not be a valid\r\nDocBook V5.0 document. See ",["xref",{"linkend":"t.schema-comparison"}]," for\r\nsummary of constraints that are checked by different schemas."],"\r\n\r\n",["para","DTD and W3C XML Schema versions of the DocBook V5.0 grammar are provided\r\nas a convenience for users who want to use DocBook V5.0 with legacy tools\r\nthat don't support RELAX NG. Authors are encouraged to switch to RELAX\r\nNG based tools as soon as possible, or at least to validate documents\r\nagainst the RELAX NG schema before further processing."],"\r\n\r\n",["para","Some document constraints can't be expressed in schema languages\r\nlike RELAX NG or W3C XML Schema. To check for these additional\r\nconstraints DocBook V5.0 uses Schematron.  We recommend that you\r\nvalidate your document against both the RELAX NG and\r\nSchematron schemas."],"\r\n\r\n",["table",{"xml:id":"t.schema-comparison"},"\r\n  ",["title","Schema Comparison"],"\r\n  ",["tgroup",{"cols":"6"},"\r\n    ",["colspec",{"colwidth":"4*"}],"\r\n    ",["colspec",{"colwidth":"1*","align":"center"}],"\r\n    ",["colspec",{"colwidth":"1*","align":"center"}],"\r\n    ",["colspec",{"colwidth":"1*","align":"center"}],"\r\n    ",["colspec",{"colwidth":"1*","align":"center"}],"\r\n    ",["colspec",{"colwidth":"1*","align":"center"}],"\r\n    ",["thead","\r\n      ",["row","\r\n\t",["entry","Description"],"\r\n\t",["entry","DTD"],"\r\n\t",["entry","W3C XML Schema"],"\r\n\t",["entry","W3C XML Schema + Schematron"],"\r\n\t",["entry","RELAX NG"],"\r\n\t",["entry","RELAX NG + Schematron/NVDL"],"\r\n      "],"\r\n    "],"\r\n    ",["tbody","\r\n      ",["row","\r\n\t",["entry","Basic document structure"],"\r\n\t",["entry","YES"],"\r\n\t",["entry","YES"],"\r\n\t",["entry","YES"],"\r\n\t",["entry","YES"],"\r\n\t",["entry","YES"],"\r\n      "],"\r\n      ",["row","\r\n\t",["entry","ID/IDREF datatypes"],"\r\n\t",["entry","YES"],"\r\n\t",["entry","YES"],"\r\n\t",["entry","YES"],"\r\n\t",["entry","YES"],"\r\n\t",["entry","YES"],"\r\n      "],"\r\n      ",["row","\r\n\t",["entry","Datatypes",["footnote","\r\n\t  ",["para","In a very few places RELAX NG specifies datatype\r\n\t  like number (mainly for length specifications) or\r\n\t  enumeration between ",["literal","0"]," and\r\n\t  ",["literal","1"],"."],"\r\n\t  ",["para","In general those datatypes can be also supported in\r\n\t  W3C XML Schema, but currently this schema is generated\r\n\t  from DTD which lacks datatype information."],"\r\n\t"],"\r\n\t"],"\r\n\t",["entry","NO"],"\r\n\t",["entry","NO"],"\r\n\t",["entry","NO"],"\r\n\t",["entry","YES"],"\r\n\t",["entry","YES"],"\r\n      "],"\r\n      ",["row","\r\n\t",["entry","Co-occurrences",["footnote","\r\n\t",["para","RELAX NG grammar enforces exclusivity of several\r\n\telements. For example if you have ",["tag","title"]," inside\r\n\t",["tag","info"]," then it is not allowed to have another\r\n\t",["tag","title"]," outside ",["tag","info"],". Similarly,\r\n\tmodels of HTML and CALS tables are separated and validated\r\n\tproperly, where in DTD and WXS only union of both models is\r\n\tavailable."],"\r\n\t",["para","On other places co-occurrences enforces particular\r\n\tcontent model based on presence of specific attribute or\r\n\tattribute value."],"\r\n\t",["para","Please also note that in theory co-occurences can be\r\n\tvalidated using Schematron, but the current DocBook schema\r\n\tuses RELAX NG for these definitions. Schematron can be used\r\n\tonly for validation, whereas grammar based schemas like\r\n\tRELAX NG are useful also for other purposes like guided editing."],"\r\n\t"]],"\r\n\t",["entry","NO"],"\r\n\t",["entry","NO"],"\r\n\t",["entry","NO"],"\r\n\t",["entry","YES"],"\r\n\t",["entry","YES"],"\r\n      "],"\r\n      ",["row","\r\n\t",["entry","Hooks for MathML and SVG content"],"\r\n\t",["entry","NO"],"\r\n\t",["entry","NO"],"\r\n\t",["entry","NO"],"\r\n\t",["entry","YES"],"\r\n\t",["entry","YES"],"\r\n      "],"\r\n      ",["row","\r\n\t",["entry","Link type integrity",["footnote","\r\n\t",["para","Check whether ID/IDREF links are pointing to element\r\n\tof corresponding type. For example that\r\n\t",["tag","footnoteref"]," points to\r\n\t",["tag","footnote"],"."]]],"\r\n\t",["entry","NO"],"\r\n\t",["entry","NO"],"\r\n\t",["entry","YES"],"\r\n\t",["entry","NO"],"\r\n\t",["entry","YES"],"\r\n      "],"\r\n      ",["row","\r\n\t",["entry","Presence of ",["tag",{"class":"attribute"},"version"],"\r\n\tattribute on the root element"],"\r\n\t",["entry","NO"],"\r\n\t",["entry","NO"],"\r\n\t",["entry","YES"],"\r\n\t",["entry","NO"],"\r\n\t",["entry","YES"],"\r\n      "],"\r\n      ",["row","\r\n\t",["entry","Miscellaneous checks",["footnote","\r\n\t",["para","For example consistency of segmented lists, only one\r\n\tterm inside term definition etc."]]],"\r\n\t",["entry","NO"],"\r\n\t",["entry","NO"],"\r\n\t",["entry","YES"],"\r\n\t",["entry","NO"],"\r\n\t",["entry","YES"],"\r\n      "],"\r\n      ",["row","\r\n\t",["entry","Element exclusions",["footnote","\r\n\t",["para","Prevents improper nesting of elements, like admonition\r\n\tinside admonition."]]],"\r\n\t",["entry","NO"],"\r\n\t",["entry","NO"],"\r\n\t",["entry","YES"],"\r\n\t",["entry","NO"],"\r\n\t",["entry","YES"],"\r\n      "],"        \r\n    "],"\r\n  "],"\r\n"],"\r\n\r\n",["section",{"xml:id":"schemas"},"\r\n",["title","Where to get the schemas"],"\r\n\r\n",["para","The latest versions of schemas can be obtained from ",["link",{"xl:href":"http://docbook.org/schemas/5x.html"}],". At the time this was\r\nwritten the latest version was 5.0. Individual schemas are\r\navailable at the following locations:"],"\r\n\r\n",["variablelist","\r\n",["varlistentry","\r\n",["term","RELAX NG schema"],"\r\n",["listitem",["para",["link",{"xl:href":"http://docbook.org/xml/5.0/rng/docbook.rng"}]]],"\r\n"],"\r\n",["varlistentry","\r\n",["term","RELAX NG schema in compact syntax"],"\r\n",["listitem",["para",["link",{"xl:href":"http://docbook.org/xml/5.0/rng/docbook.rnc"}]]],"\r\n"],"\r\n",["varlistentry","\r\n",["term","DTD"],"\r\n",["listitem",["para",["link",{"xl:href":"http://docbook.org/xml/5.0/dtd/docbook.dtd"}]]],"\r\n"],"\r\n",["varlistentry","\r\n",["term","W3C XML Schema"],"\r\n",["listitem",["para",["link",{"xl:href":"http://docbook.org/xml/5.0/xsd/docbook.xsd"}]]],"\r\n"],"\r\n",["varlistentry","\r\n",["term","Schematron schema with additional checks"],"\r\n",["listitem",["para",["link",{"xl:href":"http://docbook.org/xml/5.0/sch/docbook.sch"}]]],"\r\n"],"\r\n"],"\r\n\r\n",["para","These schemas are also available from the mirror at\r\n",["link",{"xl:href":"http://www.oasis-open.org/docbook/xml/5.0/"}],"."],"\r\n\r\n"],"\r\n\r\n",["section",{"xml:id":"docs"},"\r\n",["title","DocBook documentation"],"\r\n\r\n",["para","Detailed documentation about each DocBook V5.0 element is\r\npresented in ",["link",{"xl:href":"http://docbook.org/tdg5/en/html/pt02.html"},"the reference part\r\nof ",["citetitle","DocBook: The Definitive Guide"]],"."],"\r\n\r\n",["note","\r\n",["para","Other parts of ",["citetitle","DocBook: The Definitive\r\nGuide"]," have not yet been updated to reflect the changes\r\nmade in DocBook V5.0. Please do not be confused by this."],"\r\n"],"\r\n\r\n"],"\r\n\r\n"],"\r\n\r\n"],"\r\n\r\n",["section",{"xml:id":"tools"},"\r\n",["title","Tool chain"],"\r\n\r\n",["para","This section briefly describes tools and procedures to edit and\r\nprocess content stored in DocBook V5.0."],"\r\n\r\n",["section",{"xml:id":"editors"},"\r\n",["title","Editing DocBook V5.0"],"\r\n\r\n",["para","Because DocBook is an XML-based format and XML is a text-based\r\nformat, you can use any text editor to create and edit DocBook V5.0\r\ndocuments. However, using ",["quote","dumb"]," editors like Notepad is\r\nnot very productive. You will do better if you use an editor that\r\nsupports XML. Although there are DTD and W3C XML Schemas available for\r\nDocBook V5.0, which means you can use any editor that works with DTDs\r\nor W3C XML Schemas, we recommend that you use the RELAX NG grammar\r\nwith DocBook V5.0. The rest of this section contains an overview of\r\nXML editors (listed in alphabetical order) that are known to work with\r\nRELAX NG schemas and that offer guided editing based on the RELAX NG\r\nschema."],"\r\n\r\n",["section",{"xml:id":"editors-nxml"},"\r\n",["title","Emacs and nXML"],"\r\n\r\n",["para",["link",{"xl:href":"http://www.thaiopensource.com/nxml-mode/"},"nXML\r\nmode"]," is an add-on for the ",["application",{"xl:href":"http://www.gnu.org/software/emacs/emacs.html"},"GNU\r\nEmacs"]," text editor. By installing nXML you can turn Emacs\r\ninto a very powerful XML editor that offers guided editing and\r\nvalidation of XML documents."],"\r\n\r\n",["figure",{"xml:id":"f.emacs"},"\r\n",["title","Emacs with nXML mode provides guided editing and validation"],"\r\n",["mediaobject","\r\n",["imageobject",{"role":"html"},"\r\n",["imagedata",{"fileref":"images/emacs.png"}],"\r\n"],"\r\n",["imageobject",{"role":"fo"},"\r\n",["imagedata",{"fileref":"images/emacs.png","width":"100%"}],"\r\n"],"\r\n"],"\r\n"],"\r\n\r\n",["para","nXML uses a special configuration file named\r\n",["filename","schemas.xml"]," to associate schemas with XML\r\ndocuments. Often you will find this file in the directory\r\n",["filename","site-lisp/nxml/schema"]," inside the Emacs installation\r\ndirectory. Adding the following line into the configuration file,\r\nwill associate DocBook V5.0 elements with the appropriate\r\nschema:"],"\r\n\r\n",["programlisting","<namespace ns=\"http://docbook.org/ns/docbook\" uri=\"",["replaceable","/path/to/"],"docbook.rnc\"/>"],"\r\n\r\n",["note","\r\n",["para","Please note that nXML ships with a file named\r\n",["filename","docbook.rnc"],". This file contains the RELAX NG grammar\r\nfor DocBook V4.x. Be sure that you associate the DocBook V5.0 namespace\r\nwith the corresponding DocBook V5.0 grammar."],"\r\n"],"\r\n\r\n",["para","If you can't edit the global ",["filename","schemas.xml"]," file,\r\nyou can create this file in the same directory as your document. nXML will\r\nfind associations placed there also. In this case you must create a\r\ncomplete configuration file like:"],"\r\n\r\n",["programlisting","<locatingRules xmlns=\"http://thaiopensource.com/ns/locating-rules/1.0\">\r\n  <namespace ns=\"http://docbook.org/ns/docbook\" uri=\"",["replaceable","/path/to/"],"docbook.rnc\"/>\r\n</locatingRules>"],"\r\n\r\n"],"\r\n\r\n",["section",{"xml:id":"editors-oxygen"},"\r\n",["title","oXygen"],"\r\n\r\n",["para",["application",{"xl:href":"http://www.oxygenxml.com/"},"oXygen"]," is a feature\r\nrich XML editor. It has built-in support for many schema languages\r\nincluding RELAX NG and it is preconfigured with many document types\r\nincluding DocBook. oXygen will assist you with writing DocBook V5.0\r\ncontent, and you will be able to validate your documents against both\r\nRELAX NG and Schematron schemas."],"\r\n\r\n",["figure",{"xml:id":"f.oxygen.open5"},"\r\n",["title","DocBook V5.0 document opened in oXygen"],"\r\n",["mediaobject","\r\n",["imageobject","\r\n",["imagedata",{"fileref":"images/oxygen4.png","width":"100%"}],"\r\n"],"\r\n"],"\r\n"],"\r\n\r\n",["figure",{"xml:id":"f.oxygen.author.mode"},"\r\n",["title","DocBook V5.0 document opened in oXygen in Author mode"],"\r\n",["mediaobject","\r\n",["imageobject","\r\n",["imagedata",{"fileref":"images/oxygen5.png","width":"100%"}],"\r\n"],"\r\n"],"\r\n"],"\r\n\r\n"],"\r\n\r\n",["section",{"xml:id":"editors-xxe"},"\r\n",["title","XML Mind XML editor"],"\r\n\r\n",["para",["application",{"xl:href":"http://www.xmlmind.com/xmleditor/"},"XML\r\nMind XML editor"]," (XXE) is a visual validating XML editor that\r\nprovides a wordprocessor-like interface to users. It is available in\r\ntwo versions, Standard and Professional. The Standard version is free and\r\nprovides everything you need to edit DocBook V5.0 documents."],"\r\n\r\n",["figure",{"xml:id":"f.xmlmind"},"\r\n",["title","XML Mind XML Editor – feels almost like MS Word but real DocBook V5.0 markup is created"],"\r\n",["mediaobject","\r\n",["imageobject","\r\n",["imagedata",{"fileref":"images/xxe.png","width":"100%"}],"\r\n"],"\r\n"],"\r\n"],"\r\n\r\n",["para","In order to use DocBook V5.0 in XXE you have to install\r\nan add-on. Go to\r\n",["menuchoice",["guimenu","Options"],["guimenuitem","Install\r\nAdd-ons…"]],". Then choose ",["guilabel","DocBook\r\n5 configuration"]," and press the ",["guibutton","OK"],"\r\nbutton. After restart, XXE is ready to work with DocBook V5.0\r\ndocuments."],"\r\n\r\n"],"\r\n\r\n"],"\r\n\r\n",["section",{"xml:id":"validators"},"\r\n",["title","Validating DocBook V5.0"],"\r\n\r\n",["para","If you are not using a RELAX NG-based validating editor when you\r\ncreate documents, we strongly recommend that you validate your\r\ndocuments against RELAX NG and Schematron schemas before processing\r\nthem. Only after successful validation can you be sure that your\r\ndocument is really DocBook V5.0 and that processing tools will be able\r\nto process it correctly."],"\r\n\r\n",["para","For validation you can use tools that support simultaneous RELAX NG and\r\nSchematron validation, or you can use NVDL to orchestrate validation using\r\nthe two schemas."],"\r\n\r\n",["section",{"xml:id":"validators-rng-sch"},"\r\n",["title","Using RELAX NG and Schematron"],"\r\n\r\n",["para","You can find a list of RELAX NG validators at ",["link",{"xl:href":"http://relaxng.org/#validators"}],". It is best to use\r\nvalidators with support for embedded Schematron rules inside RELAX NG\r\nschemas. Schematron is a rule-based validation language which is used\r\nto impose additional constraints on DocBook documents. Schematron rules\r\nassert conditions which are impossible or difficult to express \r\nin a pure RELAX NG schema."],"\r\n\r\n",["para",["application",{"xl:href":"https://msv.dev.java.net/"},"Sun \r\nMulti-Schema XML Validator (MSV)"]," is able to validate an XML\r\ndocument against a RELAX NG schema and Schematron rules at the same time.\r\nTo install and use MSV follow these steps:"],"\r\n\r\n",["procedure","\r\n",["step","\r\n",["para","Download ",["filename","relames.zip"]," from ",["link",{"xl:href":"https://msv.dev.java.net/servlets/ProjectDocumentList?folderID=101"}],"."],"\r\n"],"\r\n",["step","\r\n",["para","Unpack the downloaded file into an arbitrary directory."],"\r\n"],"\r\n",["step","\r\n",["para","Validate your document using the following command:"],"\r\n",["screen",["command","java"]," -Xss512K -jar ",["replaceable","/path/to/"],"relames.jar ",["replaceable","/path/to/"],"docbook.rng document.xml"],"\r\n",["note","\r\n",["para","The switch ",["option","-Xss512K"]," increases the stack size\r\nof the Java virtual machine. This is necessary because the DocBook schema is\r\nquite large. If you get stack overflow errors from MSV, increase\r\nthis value. You may get spurious error messages if the value\r\nis too small, so if you get a stack overflow error, ignore any other error\r\nmessages and try a larger value for the stack size.\r\nIf you are not using Sun's Java implementation, please consult the\r\ndocumentation for your virtual machine to learn how to increase the stack\r\nsize."],"\r\n"],"\r\n"],"\r\n"],"\r\n\r\n",["para","There is also an ",["link",{"xl:href":"http://relaxed.vse.cz/docbookvalidator/"},"on-line DocBook V5.0\r\nvalidator"]," that validates DocBook V5.0 documents against the normative\r\nRELAX NG schema with embedded Schematron rules."],"\r\n\r\n"],"\r\n\r\n",["section","\r\n",["title","Using NVDL"],"\r\n\r\n",["para","NVDL is a meta-schema language which can validate a document \r\nagainst several schemas. DocBook V5.0 comes with a NVDL\r\nschema which specifies that DocBook documents should be validated\r\nagainst both RELAX NG and Schematron schemas."],"\r\n\r\n",["para","You can find a list of NVDL validators at ",["link",{"xl:href":"http://nvdl.org/"}],". The following procedures show how to\r\ninstall and use the ",["application",{"xl:href":"http://www.oxygenxml.com/onvdl.html"},"oNVDL"]," and\r\n",["application",{"xl:href":"http://jnvdl.sourceforge.net"},"JNVDL"],"\r\nvalidators."],"\r\n\r\n",["procedure","\r\n",["title","oNVDL installation and usage"],"\r\n",["step","\r\n",["para","Download ",["filename",{"xl:href":"http://www.oxygenxml.com/InstData/onvdl/onvdl-20070517.zip"},"onvdl-20070517.zip"],"."],"\r\n"],"\r\n",["step","\r\n",["para","Unpack the downloaded file into an arbitrary directory."],"\r\n"],"\r\n",["step","\r\n",["para","Validate your document using the following command:"],"\r\n",["screen",["command","java"]," -jar ",["replaceable","/path/to/oNVDL/"],"bin/onvdl.jar ",["replaceable","/path/to/"],"docbook.nvdl document.xml"],"\r\n"],"\r\n"],"\r\n\r\n",["procedure","\r\n",["title","JNVDL installation and usage"],"\r\n",["step","\r\n",["para","Download the latest release of JNVDL from ",["link",{"xl:href":"http://sourceforge.net/project/showfiles.php?group_id=164464"}],"."],"\r\n"],"\r\n",["step","\r\n",["para","Unpack the downloaded file into an arbitrary directory."],"\r\n"],"\r\n",["step","\r\n",["para","Modify file ",["filename","jnvdl.bat"]," (or ",["filename","jnvdl.sh"]," on Unix based systems) to include ",["option","-Xss512K"]," switch directly after ",["command","java"]," command."],"\r\n"],"\r\n",["step","\r\n",["para","On Windows systems, validate your document using the following command:"],"\r\n",["screen",["replaceable","/path/to/jnvdl/"],["command","jnvdl"]," -nt -s ",["replaceable","/path/to/"],"docbook.nvdl document.xml"],"\r\n",["para","On Unix systems, validate your document using the following command:"],"\r\n",["screen",["replaceable","/path/to/jnvdl/"],["command","jnvdl.sh"]," -nt -s ",["replaceable","/path/to/"],"docbook.nvdl document.xml"],"\r\n"],"\r\n"],"\r\n\r\n"],"\r\n\r\n"],"\r\n\r\n",["section",{"xml:id":"processing"},"\r\n",["title","Processing DocBook V5.0"],"\r\n\r\n",["para","Part of DocBook's great success can be attributed to the\r\navailability of free\r\ntools that can be used to transform DocBook content into various\r\ntarget formats including HTML and PDF. The DocBook XSL Stylesheets are\r\nvery popular tools."],"\r\n\r\n",["section",{"xml:id":"dbxsl"},"\r\n",["title","DocBook XSL Stylesheets"],"\r\n\r\n",["para","The DocBook stylesheets are designed to process content written in\r\ndifferent versions of DocBook (for example 3.1 and 4.2). Recent\r\nversions of the stylesheets are also able to process DocBook V5.0\r\nwith some limitations."],"\r\n\r\n",["para","You can process DocBook V5.0 documents with the DocBook XSL\r\nstylesheets in exactly the same way you process DocBook V4.x documents.\r\nYou do not need special software; you can stick to your preferred\r\nXSLT processor, be it Saxon, xsltproc, Xalan or whatever else (but see\r\nthe note about the lost base URI below)."],"\r\n\r\n",["para","During document processing, the stylesheets strip\r\nnamespaces from DocBook V5.0 to get a document which will be\r\nvery similar to DocBook V4.x. This is necessary because from the XSLT\r\npoint of view, elements from different namespaces are distinct and cannot \r\nbe easily processed by the same set of templates. This process is\r\ncompletely transparent to the user. If you are processing DocBook V5.0\r\ndocuments, the only difference is that you will see the following\r\nadditional message:"],"\r\n\r\n",["screen","Note: namesp. cut : stripped namespace before processing\r\nNote: namesp. cut : processing stripped document"],"\r\n\r\n",["para","Although you can successfully use the existing stylesheets to\r\nprocess DocBook V5.0, there are some limitations and unsupported\r\nfeatures. The unsupported features include:"],"\r\n\r\n",["itemizedlist","\r\n",["listitem",["para","general annotations;"]],"\r\n",["listitem",["para","general XLink links on all elements."]],"\r\n"],"\r\n\r\n",["note","\r\n",["para","During namespace stripping, the base URI of the document is\r\nlost. This means that in rare situations, relatively referenced\r\nresources like images or programlistings can be processed incorrectly.\r\nThe stylesheets attempt to compensate for this problem, but that is not always \r\npossible. When an XSLT processor other than Saxon or Xalan is used, a warning \r\nmessage is generated:\r\n\r\n",["screen","WARNING: cannot add @xml:base to node set root element. Relative paths may not work."],"\r\n"],"\r\n\r\n"],"\r\n"],"\r\n\r\n",["section",{"xml:id":"dbxsl-ns"},"\r\n",["title","DocBook XSL-NS Stylesheets"],"\r\n",["para","As you can see from reading the previous section, namespace\r\n  stripping has limitations that will cause trouble in some\r\n  situations. To overcome those limitations, Bob Stayton created a\r\n  build system for taking the non-namespace-aware DocBook XSL\r\n  stylesheets and generating namespace-aware versions from them.\r\n  The DocBook ",["link",{"xl:href":"http://docbook.sourceforge.net/release/xsl-ns/current/"},"XSL-NS stylesheets"]," are the result."],"\r\n\r\n",["para","The DocBook XSL-NS stylesheets are released side-by-side\r\n  with the DocBook XSL stylesheets, as a separate ",["link",{"xl:href":"https://sourceforge.net/project/showfiles.php?group_id=21935&package_id=219178"},["package","docbook-xsl-ns"]]," package. They are the\r\nrecommended XSLT 1.0 stylesheets to use for transforming\r\nnamespaced (DocBook V5.0) documents."],"\r\n"],"\r\n\r\n",["section",{"xml:id":"dbxsl2"},"\r\n",["title","XSLT 2.0 based re-implementation"],"\r\n\r\n",["para","XSLT 1.0 is missing some important features. To work around\r\nthese missing features, the current DocBook XSL stylesheets use some\r\nimplementation-specific extensions.\r\nXSLT 2.0 adds many new and previously missing features into the language.\r\nA new set of DocBook stylesheets is being implemented based on XSLT 2.0\r\nto take advantage of these features and to fully support DocBook V5.0.\r\n"],"\r\n\r\n",["para","The XSLT 2.0 based stylesheets have many new features, including:"],"\r\n\r\n",["itemizedlist","\r\n",["listitem",["para","seamless integration of profiling (conditional\r\ndocuments) with external bibliographies and\r\nglossaries;"]],"\r\n",["listitem",["para","no need for (most) external extensions;"]],"\r\n",["listitem",["para","internationalized indexes;"]],"\r\n",["listitem",["para","easy to customize titlepage templates."]],"\r\n"],"\r\n\r\n",["para","The XSLT 2.0 based stylesheets are still under development.  At\r\nthis writing, they only support HTML and chunked HTML output.  As time\r\npermits, the stylesheet developers will be adding other formats.  Since\r\nthe stylesheets are developed in the limited free time the developers\r\nhave, there's no specific schedule."],"\r\n\r\n",["para","There are not very many XSLT 2.0 implementations available.\r\nBut, if you want to try the new stylesheets, grab a snapshot of\r\nthe development version from ",["link",{"xl:href":"http://docbook.sourceforge.net/snapshots/docbook-xsl2-snapshot.zip"}],"\r\nand unpack it somewhere. Then download and install Saxon 9 from ",["link",{"xl:href":"http://saxon.sf.net"}],"."],"\r\n\r\n",["para","To transform a DocBook V5.0 document to a single HTML page use the command:"],"\r\n\r\n",["screen",["command","java"]," -jar ",["replaceable","/path/to/"],"saxon9.jar -o output.html document.xml ",["replaceable","/path/to/"],"docbook-xsl2-snapshot/html/docbook.xsl"],"\r\n\r\n",["para","To transform a DocBook V5.0 document to a set of chunked HTML pages use the command:"],"\r\n\r\n",["screen",["command","java"]," -jar ",["replaceable","/path/to/"],"saxon9.jar document.xml ",["replaceable","/path/to/"],"docbook-xsl2-snapshot/html/chunk.xsl"],"\r\n\r\n"],"\r\n\r\n"],"\r\n\r\n"],"\r\n\r\n",["section",{"xml:id":"changes"},"\r\n",["title","Markup changes"],"\r\n\r\n",["para","This section describes the most common markup changes\r\nbetween DocBook V4.x and V5.0.\r\nYou can find a complete list of changes in\r\n",["citation","DB5SPEC"],"."],"\r\n\r\n",["section",{"xml:id":"changes-linking"},"\r\n",["title","Improved cross-referencing and linking"],"\r\n\r\n",["para","In DocBook V4.x the attribute ",["tag",{"class":"attribute"},"id"]," is\r\nused to assign a unique identifier to an element. In DocBook V5.0 this\r\nattribute is renamed ",["tag",{"class":"attribute"},"xml:id"]," in order\r\nto comply with ",["citation","XMLID"],"."],"\r\n\r\n",["para","Now you can use almost any inline element as the source of a link,\r\nnot just ",["tag","xref"]," or ",["tag","link"],". For example, the following\r\nDocBook 4.x content:"]," \r\n\r\n",["programlisting","<section id=\"dir\">\r\n  <title>DIR command</title>\r\n  <para>...</para>\r\n</section>\r\n\r\n<section id=\"ls\">\r\n  <title>LS command</title>\r\n  <para>This command is a synonym for <link linkend=\"dir\"><command>DIR</command></link> command.</para>\r\n</section>"],"\r\n\r\n",["para","is written in DocBook V5.0 as:"],"\r\n\r\n",["programlisting","<section xml:id=\"dir\">\r\n  <title>DIR command</title>\r\n  <para>...</para>\r\n</section>\r\n\r\n<section xml:id=\"ls\">\r\n  <title>LS command</title>\r\n  <para>This command is a synonym for <command linkend=\"dir\">DIR</command> command.</para>\r\n</section>"],"\r\n\r\n",["para","The ",["tag",{"class":"attribute"},"linkend"]," attribute was added to all\r\ninline elements together with the ",["tag",{"class":"attribute"},"href"],"\r\nattribute from the XLink namespace. This means that you can use any inline\r\nelement as the source of a hypertext link. To use XLinks you have\r\nto declare the XLink namespace (most often on the root element of your\r\ndocument):"],"\r\n\r\n",["programlisting","<article xmlns=\"http://docbook.org/ns/docbook\" \r\n         xmlns:xl=\"http://www.w3.org/1999/xlink\" version=\"5.0\">\r\n  <title>Test article</title>\r\n\r\n  <para><application xl:href=\"http://www.gnu.org/software/emacs/emacs.html\">Emacs</application> \r\n    is my favourite text editor.</para>","\r\n  …"],"\r\n\r\n",["para","The ",["tag",{"condition":"v4"},"ulink"]," element was removed from DocBook V5.0\r\nin favor of XLink linking. Instead of the DocBook V4.x ",["tag",{"condition":"v4"},"ulink"],"\r\nelement:"],"\r\n\r\n",["programlisting","<ulink url=\"http://docbook.org\">DocBook site</ulink>"],"\r\n\r\n",["para","you can now use ",["tag","link"]],"\r\n\r\n",["programlisting","<link xl:href=\"http://docbook.org\">DocBook site</link>"],"\r\n\r\n",["para","XLink links may contain a fragment identifier, which you can \r\nuse instead of ",["tag",{"class":"attribute"},"linkend"]," to form\r\ncross-references inside a document; for example:"],"\r\n\r\n",["programlisting","<command xl:href=\"#dir\">DIR</command>"],"\r\n\r\n",["para","However XLink links are not checked during validation, while ",["tag",{"class":"attribute"},"xml:id"],"/",["tag",{"class":"attribute"},"linkend"],"\r\nlinks are checked for ID/IDREF consistency.\r\nOne place where the XLink-based, fragment identifier scheme is\r\nuseful is when XInclude is being used, since XML ID/IDREF links\r\ncannot span XInclude boundaries.\r\nYou can use whichever approach better suits your needs."],"\r\n"],"\r\n\r\n",["section",{"xml:id":"changes-renamed"},"\r\n",["title","Renamed elements"],"\r\n\r\n",["para","Some elements were renamed to better express their meaning or to\r\nreduce the total number of elements available in DocBook."],"\r\n\r\n",["table",{"xml:id":"t.renamed"},"\r\n",["title","Renamed elements"],"\r\n",["tgroup",{"cols":"2"},"\r\n",["thead","\r\n",["row","\r\n",["entry","Old name"],"\r\n",["entry","New name"],"\r\n"],"\r\n"],"\r\n",["tbody","\r\n",["row","\r\n",["entry",["tag",{"condition":"v4"},"sgmltag"]],"\r\n",["entry",["tag","tag"]],"\r\n"],"\r\n",["row","\r\n",["entry",["tag",{"condition":"v4"},"bookinfo"],", ",["tag",{"condition":"v4"},"articleinfo"],",\r\n",["tag",{"condition":"v4"},"chapterinfo"],", ",["tag",{"condition":"nolink"},"*info"]],"\r\n",["entry",["tag","info"]],"\r\n"],"\r\n",["row","\r\n",["entry",["tag",{"condition":"v4"},"authorblurb"]],"\r\n",["entry",["tag","personblurb"]],"\r\n"],"\r\n",["row","\r\n",["entry",["tag",{"condition":"v4"},"collabname"],", ",["tag",{"condition":"v4"},"corpauthor"],",\r\n",["tag",{"condition":"v4"},"corpcredit"],", ",["tag",{"condition":"v4"},"corpname"]],"\r\n",["entry",["tag","orgname"]],"\r\n"],"\r\n",["row","\r\n",["entry",["tag",{"condition":"v4"},"isbn"],", ",["tag",{"condition":"v4"},"issn"],",\r\n",["tag",{"condition":"v4"},"pubsnumber"]],"\r\n",["entry",["tag","biblioid"]],"\r\n"],"\r\n",["row","\r\n",["entry",["tag",{"condition":"v4"},"lot"],", ",["tag",{"condition":"v4"},"lotentry"],", ",["tag",{"condition":"v4"},"tocback"],",\r\n",["tag",{"condition":"v4"},"tocchap"],", ",["tag",{"condition":"v4"},"tocfront"],", ",["tag",{"condition":"v4"},"toclevel1"],",\r\n",["tag",{"condition":"v4"},"toclevel2"],", ",["tag",{"condition":"v4"},"toclevel3"],", ",["tag",{"condition":"v4"},"toclevel4"],",\r\n",["tag",{"condition":"v4"},"toclevel5"],", ",["tag",{"condition":"v4"},"tocpart"]],"\r\n",["entry",["tag","tocdiv"]],"\r\n"],"\r\n",["row","\r\n",["entry",["tag",{"condition":"v4"},"graphic"],", ",["tag",{"condition":"v4"},"graphicco"],",\r\n",["tag",{"condition":"v4"},"inlinegraphic"],", ",["tag",{"condition":"v4"},"mediaobjectco"]],"\r\n",["entry",["tag","mediaobject"]," and ",["tag","inlinemediaobject"]],"\r\n"],"\r\n",["row","\r\n",["entry",["tag",{"condition":"v4"},"ulink"]],"\r\n",["entry",["tag","link"]],"\r\n"],"\r\n",["row","\r\n",["entry",["tag",{"condition":"v4"},"ackno"]],"\r\n",["entry",["tag","acknowledgements"]],"\r\n"],"\r\n"],"\r\n"],"\r\n"],"\r\n\r\n"],"\r\n\r\n",["section",{"xml:id":"changes-removed"},"\r\n",["title","Removed elements"],"\r\n\r\n",["para","The following elements were removed from DocBook V5.0 without\r\ndirect replacements: ",["tag",{"condition":"v4"},"action"],", ",["tag",{"condition":"v4"},"beginpage"],", ",["tag",{"condition":"v4"},"highlights"],",\r\n",["tag",{"condition":"v4"},"interface"],", ",["tag",{"condition":"v4"},"invpartnumber"],", ",["tag",{"condition":"v4"},"medialabel"],", ",["tag",{"condition":"v4"},"modespec"],",\r\n",["tag",{"condition":"v4"},"structfield"],", ",["tag",{"condition":"v4"},"structname"],".\r\nIf you use one or more of these elements, here are some suggestions\r\nas to how to re-code them in DocBook V5.0.\r\n"],"\r\n\r\n",["table",{"xml:id":"t.removed"},"\r\n",["title","Recommended mapping for removed elements"],"\r\n",["tgroup",{"cols":"2"},"\r\n",["thead","\r\n",["row","\r\n",["entry","Old name"],"\r\n",["entry","Recommended mapping"],"\r\n"],"\r\n"],"\r\n",["tbody","\r\n",["row","\r\n",["entry",["tag",{"condition":"v4"},"action"]],"\r\n",["entry","Use ",["computeroutput","<",["tag","phrase"]," remap=\"action\">"],"."],"\r\n"],"\r\n",["row","\r\n",["entry",["tag",{"condition":"v4"},"beginpage"]],"\r\n",["entry","Remove: ",["tag",{"condition":"v4"},"beginpage"]," is advisory only\r\nand has tended to cause confusion.  A processing instruction or\r\ncomment should be a workable replacement if one is needed."],"\r\n"],"\r\n",["row","\r\n",["entry",["tag",{"condition":"v4"},"highlights"]],"\r\n",["entry","Use ",["tag","abstract"],".  Note that because ",["tag",{"condition":"v4"},"highlights"]," has a broader content model, you may\r\nneed to wrap contents in a ",["tag","para"]," inside\r\n",["tag","abstract"],"."],"\r\n"],"\r\n",["row","\r\n",["entry",["tag",{"condition":"v4"},"interface"]],"\r\n",["entry","Use one of the ",["quote","gui*"]," elements\r\n(",["tag","guibutton"],", ",["tag","guiicon"],", ",["tag","guilabel"],",\r\n",["tag","guimenu"],", ",["tag","guimenuitem"],", or\r\n",["tag","guisubmenu"],")."],"\r\n"],"\r\n",["row","\r\n",["entry",["tag",{"condition":"v4"},"invpartnumber"]],"\r\n",["entry","Use ",["computeroutput","<",["tag","biblioid"]," class=\"other\"\r\notherclass=\"medialabel\">"],".  The\r\n",["tag","productnumber"]," element is another alternative."],"\r\n"],"\r\n",["row","\r\n",["entry",["tag",{"condition":"v4"},"medialabel"]],"\r\n",["entry","Use ",["computeroutput","<",["tag","citetitle"],"\r\npubwork=\"",["replaceable","mediatype"],"\">"],",\r\nwhere ",["replaceable","mediatype"]," is the type of media being\r\nlabeled (e.g.,",["tag",{"class":"attvalue"},"cdrom"]," or ",["tag",{"class":"attvalue"},"dvd"],")."],"\r\n"],"\r\n",["row","\r\n",["entry",["tag",{"condition":"v4"},"modespec"]],"\r\n",["entry","No longer needed.  The current processing model for\r\n",["tag","olink"]," renders ",["tag",{"condition":"v4"},"modespec"],"\r\nunnecessary."],"\r\n"],"\r\n",["row","\r\n",["entry",["tag",{"condition":"v4"},"structfield"],", ",["tag",{"condition":"v4"},"structname"]],"\r\n",["entry","Use ",["tag","varname"],". If you need to distinguish between the\r\ntwo, use ",["computeroutput","<",["tag","varname"],"\r\nremap=\"",["replaceable","structname or\r\nstructfield"],"\">"],".  In some contexts, it\r\nmay also be appropriate to use ",["tag","property"]," for ",["tag",{"condition":"v4"},"structfield"],"."],"\r\n"],"\r\n"],"\r\n"],"\r\n"],"\r\n\r\n"],"\r\n\r\n"],"\r\n\r\n",["section",{"xml:id":"convert4to5"},"\r\n",["title","Converting DocBook V4.x documents to DocBook V5.0"],"\r\n\r\n",["para","The DocBook V5.0 schema ships with an XSLT 1.0 stylesheet that\r\nis designed to transform valid DocBook V4.x documents to valid\r\nDocBook V5.0 documents."],"\r\n\r\n",["para","To convert your document, ",["filename","doc.xml"]," in the\r\nexamples below, follow these steps:"],"\r\n\r\n",["procedure","\r\n",["step","\r\n",["para","Check the validity of your DocBook XML V4.x document. The\r\nconversion tool assumes that the input document is valid. If the input\r\ndocument contains markup errors, the results will be unpredictable at\r\nbest."],"\r\n"],"\r\n",["step","\r\n",["para","Transform ",["filename","doc.xml"]," to\r\n",["filename","newdoc.xml"]," with the\r\n",["filename","db4-upgrade.xsl"]," stylesheet included in the\r\nDocBook V5.0 distribution that you are using."],"\r\n"],"\r\n",["step","\r\n",["para","Check the validity of your DocBook XML V5.0 document against\r\nthe DocBook V5.0 RELAX NG grammar."],"\r\n"],"\r\n"],"\r\n\r\n",["para","In the vast majority of cases, the resulting document should\r\nbe valid and your conversion process is finished."],"\r\n\r\n",["para","If the document is not valid, please report the problem.\r\n(Over time, we'll have more experience with the sorts of things\r\nthat can go wrong and we'll update this document to reflect that\r\nexperience.)"],"\r\n\r\n",["section",{"xml:id":"entities"},"\r\n",["title","What About Entities?"],"\r\n\r\n",["para","Using XSLT to transform existing documents to DocBook V5.0 has\r\none potential disadvantage: it removes all entity references from \r\nyour document."],"\r\n\r\n",["para","If preserving entities is an important aspect of your production\r\nwork flow, you will have to engage in a semi-manual process to\r\npreserve them."],"\r\n\r\n",["procedure","\r\n",["step","\r\n",["para","Open your existing document using your favorite editing tool.\r\nYou must use a tool that ",["emphasis","is not"]," XML-aware, or one\r\nthat allows you to edit markup “in the raw”."],"\r\n"],"\r\n",["step","\r\n",["para","Replace all occurrences of the entity references that you want\r\nto preserve with some unique string. For example, if you want to preserve\r\n“",["literal","&Product;"],"” references, you could replace them\r\nall with “",["literal","[[[Product]]]"],"” (assuming that the string\r\n“",["literal","[[[Product]]]"],"” doesn't occur anywhere else in your document)."],"\r\n"],"\r\n",["step","\r\n",["para","Copy the document type declaration off of your document and save\r\nit some place. The document type declaration is everything from\r\n“",["literal","<!DOCTYPE"],"” to the closing “",["literal","]>"],"”.\r\n"],"\r\n"],"\r\n",["step","\r\n",["para","Perform the conversion described in ",["xref",{"linkend":"convert4to5"}],".\r\n"],"\r\n"],"\r\n",["step","\r\n",["para","Open the new document using your favorite editing tool. Replace\r\nall occurrences of the unique string you used to save the entity references\r\nwith the corresponding entity references."],"\r\n"],"\r\n",["step","\r\n",["para","Paste the document type declaration that you saved onto the top\r\nof your new document."],"\r\n"],"\r\n",["step","\r\n",["para","Remove the external identifier (the ",["literal","PUBLIC"],"\r\nand/or ",["literal","SYSTEM"]," keywords) from the document type\r\ndeclaration. A document that begins:"],"\r\n",["programlisting","<!DOCTYPE book [\r\n<!ENTITY someEntity \"some replacement text\">\r\n]>"],"\r\n",["para","is perfectly well-formed. If you don't remove the references to\r\nthe DTD, then your parser will likely try to validate against DocBook\r\nV4.0 and that's not going to work. Alternatively, you could refer\r\nto the DocBook V5.0 DTD."],"\r\n"],"\r\n"],"\r\n\r\n",["tip","\r\n",["para","Steps 2 and 5 from previous procedure can be automated using the\r\n",["link",{"xl:href":"http://docbook.svn.sourceforge.net/viewvc/docbook/trunk/contrib/tools/cloak"},"cloak\r\nscript"]," written by Michael Smith."],"\r\n"],"\r\n\r\n",["section",{"xml:id":"extparsedentities"},"\r\n",["title","External Parsed Entities"],"\r\n\r\n",["para","External parsed entities, entities which load part of a document\r\nfrom another file, are a special case. These can often be replaced\r\nwith XInclude elements."],"\r\n\r\n",["para","The Perl script ",["filename","db4-entities.pl"],", also included\r\nin the DocBook V5.0 distribution attempts to perform this replacement\r\nfor you. To use the script, perform the following steps:"],"\r\n\r\n",["procedure","\r\n",["step","\r\n",["para","Process your document with ",["filename","db4-entities.pl"],".\r\nThe script expects a single filename and prints the XInclude version\r\non standard output."],"\r\n"],"\r\n",["step","\r\n",["para","Process the XInclude version as described in ",["xref",{"linkend":"convert4to5"}],".\r\n"],"\r\n"],"\r\n"],"\r\n"],"\r\n"],"\r\n\r\n"],"\r\n\r\n",["section",{"xml:id":"customizations"},"\r\n  ",["title","Customizing DocBook V5.0"],"\r\n  ","\r\n\r\n  ",["para","\r\n    It's much easier to customize DocBook V5.0 than it was to\r\n    customize earlier releases.  This is partly because RELAX NG\r\n    provides better support for modifications than DTDs and partly\r\n    because the DocBook schema is designed to take full advantage\r\n    of the capabilities RELAX NG provides.\r\n    This section describes the organization of the RELAX NG schema for\r\n    DocBook, methods and examples for adding, removing, and modifying elements\r\n    and attributes, and conventions for naming and versioning\r\n    DocBook customizations.\r\n    It assumes some familiarity with RELAX NG.  If you are unfamiliar\r\n    with RELAX NG, you can find a tutorial introduction in\r\n    ",["citation","RNCTUT"],".\r\n  "],"\r\n  ",["section",{"xml:id":"relaxngorg"},"\r\n    ",["title","DocBook RELAX NG schema organization"],"\r\n    ",["para","\r\n      The DocBook RELAX NG schema is highly modular, using named\r\n      patterns extensively.  Every element, attribute, attribute\r\n      list, and enumeration has its own named pattern.  In addition,\r\n      there are named patterns for logical combinations of elements\r\n      and attributes.  These named patterns provide ",["quote","hooks"],"\r\n      into the schema that allow you to do a wide range of customization\r\n      by simply redefining one or more of the named patterns.\r\n    "],"\r\n    ",["para","\r\n      An important design characteristic of the schema is that\r\n      duplication is minimized.  This is done through the use of\r\n      named patterns for common groupings that can be re-used.\r\n      For example, the ",["tag","imagedata"]," and ",["tag","videodata"],"\r\n      elements each have an ",["tag",{"class":"attribute"},"align"]," attribute\r\n      that takes the same set of enumerated values.  Rather than\r\n      repeating those values, a single pattern,\r\n      ",["varname","db.halign.enumeration"]," is referenced by\r\n      the ",["varname","db.videodata.align.enumeration"],"\r\n      and ",["varname","db.imagedata.align.enumeration"]," patterns,\r\n      which are in turn referenced by the\r\n      ",["varname","db.videodata.align.attribute"],"\r\n      and ",["varname","db.imagedata.align.attribute"]," patterns.\r\n      While this may seem like overkill, it allows a customizer to modify\r\n      the allowed enumerations for these two attributes separately or together,\r\n      or to completely re-define the allowed content of either or both,\r\n      by redefining one or more of these named patterns.\r\n    "],"\r\n    ",["section",{"xml:id":"patternnames"},["title","Pattern Names"],"\r\n    ",["para","\r\n      Because named patterns are used extensively, the RELAX NG schema uses\r\n      several naming conventions.  These are:\r\n      ",["itemizedlist",{"spacing":"compact"},"\r\n        ",["listitem","\r\n          ",["para","\r\n            Names have two or more parts, separated by dots ",["quote","."],"\r\n          "],"\r\n        "],"\r\n        ",["listitem","\r\n          ",["para","\r\n            The first part of each name is the prefix ",["quote","db"],"\r\n          "],"\r\n        "],"\r\n        ",["listitem","\r\n          ",["para","\r\n            Each element has a named pattern in the form\r\n            ",["varname","db.",["replaceable","elementname"]],".\r\n            Elements that have different content models in different\r\n            contexts will also have patterns in the form\r\n            ",["varname","db.",["replaceable","context.elementname"]],".  For example, ",["varname","db.figure.info"],"\r\n            defines the content model for the ",["tag","info"]," element\r\n            when it appears as a child of the ",["tag","figure"]," element.\r\n            ",["replaceable","Context"]," may have several parts.\r\n            For example, ",["varname","db.cals.entrytbl.thead"],".\r\n          "],"\r\n        "],"\r\n        ",["listitem","\r\n          ",["para","\r\n            Most attributes have a named pattern in the form\r\n            ",["varname","db.",["replaceable","attributename"],".attribute"],".\r\n            Attributes that have different content models in different\r\n            contexts will also have patterns in the form\r\n            ",["varname","db.",["replaceable","context.attributename"],".attribute"],".\r\n            For example,\r\n            ",["varname","db.olink.localinfo.attribute"]," defines the content\r\n            model of the ",["tag",{"class":"attribute"},"localinfo"]," attribute when\r\n            it appears in ",["tag","olink"],".\r\n            There are a few attributes that do not have individual named\r\n            patterns.  For example, the effectivity attributes are grouped\r\n            into ",["varname","db.effectivity.attributes"]," and not identified\r\n            separately.\r\n          "],"\r\n        "],"\r\n        ",["listitem","\r\n          ",["para","\r\n            Each element has a named pattern for its attribute list in\r\n            the form\r\n            ",["varname","db.",["replaceable","elementname"],".attlist"],"\r\n\r\n            that defines the list of attributes for that element.\r\n            Elements that have different attribute lists in different\r\n            contexts will also have patterns in the form\r\n            ",["varname","db.",["replaceable","context.elementname"],".attlist"],"\r\n            For example, ",["varname","db.html.table.attlist"]," defines\r\n            the attribute list for the html ",["tag",{"condition":"nolink"},"table"]," element and\r\n            ",["varname","db.cals.table.attlist"]," defines the attribute\r\n            list for a cals ",["tag",{"condition":"nolink"},"table"]," element.\r\n          "],"\r\n        "],"\r\n        ",["listitem","\r\n          ",["para","\r\n            Each attribute that has enumerated values has a\r\n            named pattern in the form\r\n            ",["varname","db.",["replaceable","[context.]attributename"],".enumeration"],".\r\n            If the enumeration for a particular attribute depends on\r\n            context, optional context is provided.\r\n            For example,\r\n            ",["varname","db.verbatim.continuation.enumeration"]," defines\r\n            the enumeration values for the\r\n            ",["tag",{"class":"attribute"},"continuation"]," attribute that is used\r\n            in verbatim contexts like ",["tag","screen"],".\r\n            Unlike elements and attributes, there is not necessarily a\r\n            named pattern for enumerated attributes outside their context.\r\n            For example, there is no ",["varname","db.class.enumeration"],"\r\n            because the ",["tag",{"class":"attribute"},"class"]," attribute has\r\n            a broad and non-intersecting range of uses.\r\n          "],"\r\n        "],"\r\n        ",["listitem","\r\n          ",["para","\r\n            There are several different groupings of elements and attributes.\r\n            Here are the major ones:\r\n            ",["variablelist",{"spacing":"compact"},"\r\n              ",["varlistentry","\r\n                ",["term","inlines"],"\r\n                ",["listitem","\r\n                  ",["para","\r\n                    Combinations of inline elements, for example,\r\n                    ",["varname","db.error.inlines"],", which contains\r\n                    ",["varname","db.errorcode"],",\r\n                    ",["varname","db.errortext"],", etc.\r\n                  "],"\r\n                "],"\r\n              "],"\r\n              ",["varlistentry","\r\n                ",["term","blocks"],"\r\n                ",["listitem","\r\n                  ",["para","\r\n                    Combinations of block elements, for example,\r\n                    ",["varname","db.verbatim.blocks"],", which contains\r\n                    ",["varname","db.programlisting"],",\r\n                    ",["varname","db.screen"],", etc.\r\n                  "],"\r\n                "],"\r\n              "],"\r\n              ",["varlistentry","\r\n                ",["term","attributes"],"\r\n                ",["listitem","\r\n                  ",["para","\r\n                    Combinations of attributes, for example,\r\n                    ",["varname","db.effectivity.attributes"],",\r\n                    which contains the attributes\r\n                    ",["tag",{"class":"attribute"},"arch"],",\r\n                    ",["tag",{"class":"attribute"},"condition"],",\r\n                    ",["tag",{"class":"attribute"},"conformance"],", etc.\r\n                  "],"\r\n                "],"\r\n              "],"\r\n              ",["varlistentry","\r\n                ",["term","components"],"\r\n                ",["listitem","\r\n                  ",["para","\r\n                    High level components of the schema, for example,\r\n                    ",["varname","db.navigation.components"],", which contains\r\n                    ",["varname","db.glossary"],",\r\n                    ",["varname","db.bibliography"],",\r\n                    ",["varname","db.index"],", and\r\n                    ",["varname","db.toc"],", and is used inside the\r\n                    content model for ",["tag","chapter"],", ",["tag","appendix"],",\r\n                    and ",["tag","preface"],".\r\n                  "],"\r\n                "],"\r\n              "],"\r\n              ",["varlistentry","\r\n                ",["term","contentmodel"],"\r\n                ",["listitem","\r\n                  ",["para","\r\n                    Shared content models, for example,\r\n                    ",["varname","db.admonition.contentmodel"],", which contains\r\n                    the content model for ",["tag","tip"],", ",["tag","warning"],",\r\n                    ",["tag","note"],", etc.\r\n                  "],"\r\n                "],"\r\n              "],"\r\n            "],"\r\n          "],"\r\n          ",["para","\r\n            There are a couple of other groupings designed to minimize\r\n            duplication, but these are the most important.\r\n          "],"\r\n        "],"\r\n      "],"\r\n    "],"\r\n  "],"\r\n"],"\r\n",["section",{"xml:id":"customconsiderations"},"\r\n  ",["title","General customization considerations"],"\r\n  ",["para","\r\n    Creating a customized schema is similar to\r\n    creating a customization layer for XSL.  The schema customization\r\n    layer is a new RELAX NG schema that defines your changes and\r\n    includes the standard docbook schema.  You then validate using\r\n    the schema customization as your schema.\r\n  "],"\r\n  ",["para","\r\n    ",["xref",{"linkend":"ex-empty","xrefstyle":"select: label"}]," is an empty\r\n    RELAX NG customization that does nothing\r\n    except define the name spaces and include the standard DocBook schema.\r\n    The ",["tag",{"class":"attribute"},"href"]," attribute of the\r\n    ",["tag",{"condition":"nolink"},"include"]," element points to\r\n    the location of the standard DocBook V5.0\r\n    schema.",["footnote",["para","The examples in this section use\r\n    ",["filename","docbook.rng"]," as the schema location. If you want\r\n    to create a portable schema customization you should use a standard\r\n    web-accessible location like\r\n    ",["uri","http://docbook.org/xml/5.0/rng/docbook.rng"]," and\r\n    then use ",["link",{"xl:href":"http://www.oasis-open.org/committees/download.php/14809/xml-catalogs.html"},"XML\r\n    catalogs"]," to resolve this location to your local copy of the\r\n    schema for improved performance. Unfortunately, at the time of\r\n    this writing not all RELAX NG validators support XML catalogs."]],"\r\n    All of the examples are given in both RNG and RNC form.\r\n",["example",{"xml:id":"ex-empty"},["title","Empty customization file"],"\r\n",["programlisting",{"language":"rng"},"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<grammar xmlns:db=\"http://docbook.org/ns/docbook\"\r\n         ns=\"http://docbook.org/ns/docbook\"\r\n         xmlns=\"http://relaxng.org/ns/structure/1.0\">\r\n  <include href=\"docbook.rng\"/>\r\n\r\n  <!-- redefinitions of named patterns -->\r\n\r\n</grammar>"],"\r\n",["programlisting",{"language":"rnc"},"namespace db = \"http://docbook.org/ns/docbook\"\r\n\r\ninclude \"docbook.rnc\" inherit = db\r\n# redefinitions of named patterns"],"\r\n"],"\r\n  "],"\r\n"],"\r\n  ",["section",{"xml:id":"cust-elements"},"\r\n    ",["title","Elements"],"\r\n    ",["section",{"xml:id":"cust-add-elements"},"\r\n      ",["title","Adding elements"],"\r\n      ",["para","\r\n        Adding an element typically takes two definitions.\r\n        The first defines the new element and\r\n        its content model, and the second adds the\r\n        new element into the schema.  We'll show two examples.\r\n      "],"\r\n      ",["para","\r\n        ",["xref",{"linkend":"ex-add-element-1","xrefstyle":"select: label"}],"\r\n        adds a new element,\r\n        ",["tag",{"condition":"nolink"},"person"],", with the same\r\n        content model as ",["tag","author"],".  The new element will be\r\n        allowed to appear wherever ",["tag","author"]," can appear.\r\n      "],"\r\n      ",["para","\r\n        The ",["varname","db.author"]," pattern is copied\r\n        and renamed ",["varname","dbx.person"],", defining\r\n        a new element called ",["tag",{"condition":"nolink"},"person"],".\r\n        Then, the ",["varname","db.author"]," pattern is redefined\r\n        to be a choice of the current value or ",["varname","dbx.person"],".\r\n        The ",["tag",{"class":"attribute"},"combine"]," attribute tells\r\n        RELAX NG to combine this pattern with the existing named\r\n        pattern.  In this case, the value\r\n        of the ",["tag",{"class":"attribute"},"combine"]," attribute is\r\n        ",["quote","choice"],", which tells the parser that either\r\n        the original pattern or this new pattern is a valid match.\r\n      "],"\r\n",["example",{"xml:id":"ex-add-element-1"},["title","Adding a new element by duplicating an existing one"],"\r\n",["programlisting",{"language":"rng"},"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<grammar xmlns:db=\"http://docbook.org/ns/docbook\"\r\n         ns=\"http://docbook.org/ns/docbook\"\r\n         xmlns=\"http://relaxng.org/ns/structure/1.0\">\r\n  <include href=\"docbook.rng\"/>\r\n  <!-- define the new element -->\r\n  <define name=\"dbx.person\">\r\n    <element name=\"person\">\r\n        <ref name=\"db.author.attlist\"/>\r\n        <ref name=\"db.credit.contentmodel\"/>\r\n    </element>\r\n  </define>\r\n  <!-- redefine the db.author pattern to allow db.person in\r\n       the same places as db.author -->\r\n  <define name=\"db.author\" combine=\"choice\">\r\n    <ref name=\"dbx.person\"/>\r\n  </define>\r\n</grammar>"],"\r\n",["programlisting",{"language":"rnc"},"default namespace db = \"http://docbook.org/ns/docbook\"\r\n\r\ninclude \"docbook.rnc\"\r\n# define the new element\r\ndbx.person =\r\n  element person { db.author.attlist, db.credit.contentmodel }\r\n# redefine the db.author pattern to allow db.person in\r\n# the same places as db.author\r\ndb.author |= dbx.person"],"\r\n"],"\r\n    ",["para","\r\n      The preceding method works well when you'd like a new element\r\n      to be a clone or near-clone of an existing element.  It gives\r\n      you complete control over the content model, but\r\n      only limited control over where the element is allowed.  It\r\n      works well when you want to allow the element in the same places\r\n      as an existing element, and for this example that works\r\n      nicely, since ",["tag","author"]," is allowed in four different\r\n      named patterns, each of which would have had to be redefined to\r\n      allow ",["tag",{"condition":"nolink"},"person"],".\r\n      But, if you can't find an existing element that is allowed in\r\n      exactly the places you need, this method doesn't work as well.\r\n    "],"\r\n    ",["para","\r\n      ",["xref",{"linkend":"ex-add-element-2","xrefstyle":"select: label"}],"\r\n      adds two new elements by combining them into\r\n      a higher level pattern.  In this example, we'll add\r\n      two new inline elements for writing about assembly language,\r\n      ",["tag",{"condition":"nolink"},"register"]," and \r\n      ",["tag",{"condition":"nolink"},"instruction"],".\r\n      We will allow them wherever programming inlines\r\n      or operating system inlines are allowed.\r\n      ",["xref",{"linkend":"ex-add-element-2","xrefstyle":"select: label"}],"\r\n      defines the two elements, creates a new named pattern\r\n      (",["varname","dbx.asm.inlines"],") that contains them, and adds\r\n      that pattern to ",["varname","db.programming.inlines"]," and\r\n      ",["varname","db.os.inlines"],".  Since these two patterns\r\n      don't have any elements in common, the strategy used in \r\n      ",["xref",{"linkend":"ex-add-element-1","xrefstyle":"select: label"}],"\r\n      would require selecting two different elements to ",["quote","clone"],",\r\n      which would be messy.\r\n    "],"\r\n",["example",{"xml:id":"ex-add-element-2"},["title","Adding new inline elements"],"\r\n",["programlisting",{"language":"rng"},"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<grammar xmlns:db=\"http://docbook.org/ns/docbook\"\r\n         ns=\"http://docbook.org/ns/docbook\"\r\n         xmlns=\"http://relaxng.org/ns/structure/1.0\">\r\n  <include href=\"docbook.rng\"/>\r\n  <!-- define the new elements -->\r\n  <define name=\"dbx.register\">\r\n    <element name=\"register\">\r\n      <text/>\r\n    </element>\r\n  </define>\r\n  <define name=\"dbx.instruction\">\r\n    <element name=\"instruction\">\r\n      <text/>\r\n    </element>\r\n  </define>\r\n  <!-- create a new pattern that contains the new inlines -->\r\n  <define name=\"dbx.asm.inlines\">\r\n    <choice>\r\n      <ref name=\"dbx.register\"/>\r\n      <ref name=\"dbx.instruction\"/>\r\n    </choice>\r\n  </define>\r\n  <!-- add the new inlines to programming and os inlines -->\r\n    <define name=\"db.programming.inlines\" combine=\"choice\">\r\n      <ref name=\"dbx.asm.inlines\"/>\r\n    </define>\r\n    <define name=\"db.os.inlines\" combine=\"choice\">\r\n      <ref name=\"dbx.asm.inlines\"/>\r\n    </define>\r\n</grammar>"],"\r\n",["programlisting",{"language":"rnc"},"default namespace db = \"http://docbook.org/ns/docbook\"\r\n\r\ninclude \"docbook.rnc\"\r\n# define the new elements\r\ndbx.register = element register { text }\r\ndbx.instruction = element instruction { text }\r\n# create a new pattern that contains the new inlines\r\ndbx.asm.inlines = dbx.register | dbx.instruction\r\n# add the new inlines to programming and os inlines\r\ndb.programming.inlines |= dbx.asm.inlines\r\ndb.os.inlines |= dbx.asm.inlines"],"\r\n"],"\r\n    "],"\r\n    ",["section",{"xml:id":"cust-delete-elements"},"\r\n      ",["title","Deleting elements"],"\r\n      ",["para","\r\n        Deleting elements is straightforward, but takes some\r\n        care and planning.  ",["xref",{"linkend":"ex-delete-element","xrefstyle":"select: label"}]," deletes\r\n        the ",["tag","important"]," admonition element by redefining\r\n        it with a content model of ",["varname","notAllowed"],".\r\n        Note that in this example, the redefinition is inside\r\n        the ",["tag",{"condition":"nolink"},"include"]," element.\r\n        This is required for\r\n        redefinitions that completely replace an existing pattern.\r\n      "],"\r\n      ",["para","\r\n        Be careful; If you delete an element that is a required part\r\n        of another element's content model, you can make it\r\n        impossible to create a valid document.\r\n        For example, if you delete the ",["tag","title"],"\r\n        element, you won't be able to validate a ",["tag","book"],"\r\n        because a ",["tag","book"]," requires a ",["tag","title"],".\r\n      "],"\r\n",["example",{"xml:id":"ex-delete-element"},["title","Deleting an element"],"\r\n",["programlisting",{"language":"rng"},"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<grammar xmlns:db=\"http://docbook.org/ns/docbook\"\r\n         ns=\"http://docbook.org/ns/docbook\"\r\n         xmlns=\"http://relaxng.org/ns/structure/1.0\">\r\n  <include href=\"docbook.rng\">\r\n    <!-- redefine important element as notAllowed -->\r\n    <define name=\"db.important\">\r\n      <notAllowed/>\r\n    </define>\r\n  </include>\r\n</grammar>"],"\r\n",["programlisting",{"language":"rnc"},"namespace db = \"http://docbook.org/ns/docbook\"\r\n\r\ninclude \"docbook.rnc\" inherit = db {\r\n  # redefine important element as notAllowed\r\n  db.important = notAllowed\r\n}"],"\r\n"],"\r\n    "],"\r\n    ",["section",{"xml:id":"cust-modify-elements"},"\r\n      ",["title","Customizing the content model of existing elements"],"\r\n      ",["para","\r\n         ",["xref",{"linkend":"ex-modify-element","xrefstyle":"select: label"}],"\r\n         expands the definition of ",["tag","author"]," to include two\r\n         new elements, ",["tag",{"condition":"nolink"},"born"]," and\r\n         ",["tag",{"condition":"nolink"},"died"],".\r\n         The ",["tag","author"]," element allows two content models,\r\n         ",["varname","db.person.author.contentmodel"],", which\r\n         defines an author who is a person, and\r\n         ",["varname","db.org.author.contentmodel"],", which\r\n         defines an author that is an organization.  We will modify\r\n         ",["varname","db.person.author.contentmodel"]," so that\r\n         only authors who are persons can have the new elements.\r\n",["example",{"xml:id":"ex-modify-element"},["title","Modifying the content model of an element"],"\r\n",["programlisting",{"language":"rng"},"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<grammar xmlns:db=\"http://docbook.org/ns/docbook\"\r\n         ns=\"http://docbook.org/ns/docbook\"\r\n         xmlns=\"http://relaxng.org/ns/structure/1.0\">\r\n  <include href=\"docbook.rng\"/>\r\n\r\n  <define name=\"db.person.author.contentmodel\" combine=\"interleave\">\r\n    <interleave>\r\n      <optional>\r\n        <element name=\"born\">\r\n          <ref name=\"db.date.contentmodel\"/>\r\n        </element>\r\n      </optional>\r\n      <optional>\r\n        <element name=\"died\">\r\n          <ref name=\"db.date.contentmodel\"/>\r\n        </element>\r\n      </optional>\r\n    </interleave>\r\n  </define>\r\n</grammar>"],"\r\n",["programlisting",{"language":"rnc"},"default namespace = \"http://docbook.org/ns/docbook\"\r\nnamespace db = \"http://docbook.org/ns/docbook\"\r\n\r\ninclude \"docbook.rnc\"\r\n\r\ndb.person.author.contentmodel &=\r\n  element born { db.date.contentmodel }?\r\n  & element died { db.date.contentmodel }?"],"\r\n"],"\r\n      "],"\r\n      ",["para","\r\n        This modification will allow instances like this:\r\n",["programlisting","<author>\r\n  <personname>Babe Ruth</personname>\r\n  <born>02/06/1895</born>\r\n  <died>08/16/1948</died>\r\n</author>"],"\r\nbut because we only modified the content model for authors\r\nwho are human, it won't allow an instance like this, which\r\nuses ",["varname","db.org.author.contentmodel"],":\r\n",["programlisting","<!-- INVALID -->\r\n<author>\r\n  <orgname>Boston Red Sox</orgname>\r\n  <died>1919</died>\r\n  <born>2004</born>\r\n</author>"],"\r\n      "],"\r\n    "],"\r\n  "],"\r\n  ",["section",{"xml:id":"cust-attributes"},"\r\n    ",["title","Attributes"],"\r\n    ",["section",{"xml:id":"cust-add-attributes"},"\r\n      ",["title","Adding attributes"],"\r\n      ",["para","\r\n        The simplest way to add an attribute to a single element\r\n        is to add it to the attlist pattern for that element.\r\n        ",["xref",{"linkend":"ex-add-attr","xrefstyle":"select: label"}],"\r\n        adds the optional attributes ",["tag",{"class":"attribute"},"born"],"\r\n        and ",["tag",{"class":"attribute"},"died"]," to the attribute\r\n        list for ",["tag","author"],".\r\n        The ",["varname","db.author.attlist"],"\r\n        named pattern is redefined with the\r\n        ",["tag",{"class":"attribute"},"combine"]," attribute set to\r\n        ",["quote","interleave"],", which interleaves the two new\r\n        optional attributes with the existing attributes on the list.\r\n      "],"\r\n",["example",{"xml:id":"ex-add-attr"},["title","Adding attributes"],"\r\n",["programlisting",{"language":"rng"},"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<grammar xmlns:db=\"http://docbook.org/ns/docbook\"\r\n         ns=\"http://docbook.org/ns/docbook\"\r\n         xmlns=\"http://relaxng.org/ns/structure/1.0\">\r\n  <include href=\"docbook.rng\"/>\r\n\r\n  <define name=\"db.author.attlist\" combine=\"interleave\">\r\n    <interleave>\r\n      <optional>\r\n        <attribute name=\"born\">\r\n          <ref name=\"db.date.contentmodel\"/>\r\n        </attribute>\r\n      </optional>\r\n      <optional>\r\n        <attribute name=\"died\">\r\n          <ref name=\"db.date.contentmodel\"/>\r\n        </attribute>\r\n      </optional>\r\n    </interleave>\r\n  </define>\r\n</grammar>"],"\r\n",["programlisting",{"language":"rnc"},"namespace db = \"http://docbook.org/ns/docbook\"\r\n\r\ninclude \"docbook.rnc\" inherit = db\r\n\r\ndb.author.attlist &=\r\n  attribute born { db.date.contentmodel }?\r\n  & attribute died { db.date.contentmodel }?"],"\r\n"],"\r\n    ",["para","\r\n      Unlike\r\n      ",["xref",{"linkend":"ex-modify-element","xrefstyle":"select: label"}],",\r\n      ",["xref",{"linkend":"ex-add-attr","xrefstyle":"select: label"}]," allows\r\n      the new attributes to appear on any ",["tag","author"],"\r\n      element, not just those using the person content model.\r\n    "],"\r\n    ",["para","\r\n      ",["xref",{"linkend":"ex-add-attr-2","xrefstyle":"select: label"}]," shows\r\n      how you could limit the use of these attributes to authors who\r\n      are persons.  In this example, the new attributes are interleaved\r\n      with the ",["varname","db.person.author.contentmodel"],".  \r\n      The only difference between this example and \r\n      ",["xref",{"linkend":"ex-modify-element","xrefstyle":"select: label"}]," is\r\n      that the added patterns are identified as attributes rather than\r\n      elements.  This shows some of the flexibility of RELAX NG, which\r\n      treats attributes and elements very consistently.\r\n",["example",{"xml:id":"ex-add-attr-2"},["title","Adding attributes; alternate method"],"\r\n",["programlisting",{"language":"rng"},"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<grammar xmlns:db=\"http://docbook.org/ns/docbook\"\r\n         ns=\"http://docbook.org/ns/docbook\"\r\n         xmlns=\"http://relaxng.org/ns/structure/1.0\">\r\n  <include href=\"docbook.rng\"/>\r\n  <!-- redefinitions of named patterns -->\r\n  <define name=\"db.person.author.contentmodel\" combine=\"interleave\">\r\n    <interleave>\r\n      <optional>\r\n        <attribute name=\"born\">\r\n          <ref name=\"db.date.contentmodel\"/>\r\n        </attribute>\r\n      </optional>\r\n      <optional>\r\n        <attribute name=\"died\">\r\n          <ref name=\"db.date.contentmodel\"/>\r\n        </attribute>\r\n      </optional>\r\n    </interleave>\r\n  </define>\r\n</grammar>"],"\r\n",["programlisting",{"language":"rnc"},"namespace db = \"http://docbook.org/ns/docbook\"\r\n\r\ninclude \"docbook.rnc\" inherit = db\r\n# redefinitions of named patterns\r\ndb.person.author.contentmodel &=\r\n  attribute born { db.date.contentmodel }?\r\n  & attribute died { db.date.contentmodel }?"],"\r\n"],"\r\nThere is one difference in the treatment of attributes and elements\r\nthat is worth noting.  By the XML 1.0 definition, the relative order\r\nof attributes is not significant.  Therefore, the\r\n",["tag",{"condition":"nolink"},"interleave"]," block is not required for\r\nattributes, though it does no harm.  \r\n    "],"\r\n    "],"\r\n    ",["section",{"xml:id":"cust-delete-attributes"},"\r\n      ",["title","Deleting attributes"],"\r\n      ",["para","\r\n        Deleting an attribute is similar to deleting an element,\r\n        except that you use the RELAX NG ",["varname","empty"],"\r\n        pattern rather than ",["varname","notAllowed"],".\r\n        ",["xref",{"linkend":"ex-delete-attr","xrefstyle":"select: label"}],"\r\n        deletes the linking attributes, which are collected in the\r\n        ",["varname","db.common.linking.attributes"]," pattern,\r\n        by defining that pattern as ",["varname","empty"],".\r\n      "],"\r\n",["example",{"xml:id":"ex-delete-attr"},["title","Deleting an attribute"],"\r\n",["programlisting",{"language":"rng"},"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<grammar xmlns:db=\"http://docbook.org/ns/docbook\"\r\n         ns=\"http://docbook.org/ns/docbook\"\r\n         xmlns=\"http://relaxng.org/ns/structure/1.0\">\r\n  <include href=\"docbook.rng\">\r\n    <define name=\"db.common.linking.attributes\">\r\n      <empty/>\r\n    </define>\r\n  </include>\r\n</grammar>"],"\r\n",["programlisting",{"language":"rnc"},"namespace db = \"http://docbook.org/ns/docbook\"\r\n\r\ninclude \"docbook.rnc\" inherit = db {\r\n  db.common.linking.attributes = empty\r\n}"],"\r\n"],"\r\n      ",["para","\r\n        Generally, ",["varname","empty"]," is used when deleting\r\n        attributes and ",["varname","notAllowed"]," is used when\r\n        deleting elements.\r\n      "],"\r\n    "],"\r\n    ",["section",{"xml:id":"cust-modify-attributes"},"\r\n      ",["title","Changing permitted content of attributes"],"\r\n      ",["para","\r\n        ",["xref",{"linkend":"ex-modify-attr","xrefstyle":"select: label"}],"\r\n        modifies ",["varname","db.spacing.enumeration"]," to\r\n        add the additional value ",["quote","large"],".  Note\r\n        that to remove a value from an enumeration, you need\r\n        to redefine the entire enumeration, minus the values\r\n        you don't need.\r\n      "],"\r\n",["example",{"xml:id":"ex-modify-attr"},["title","Deleting an attribute"],"\r\n",["programlisting",{"language":"rng"},"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<grammar xmlns:db=\"http://docbook.org/ns/docbook\"\r\n         ns=\"http://docbook.org/ns/docbook\"\r\n         xmlns=\"http://relaxng.org/ns/structure/1.0\">\r\n  <include href=\"docbook.rng\"/>\r\n  <!-- add value to an enumeration -->\r\n  <define name=\"db.spacing.enumeration\" combine=\"choice\">\r\n    <value>large</value>\r\n  </define>\r\n</grammar>"],"\r\n",["programlisting",{"language":"rnc"},"namespace db = \"http://docbook.org/ns/docbook\"\r\n\r\ninclude \"docbook.rnc\" inherit = db\r\n# add value to an enumeration\r\ndb.spacing.enumeration |= \"large\""],"\r\n"],"\r\n    "],"\r\n  "],"\r\n\r\n",["section",{"xml:id":"cust-naming"},"\r\n",["title","Naming and versioning DocBook customizations"],"\r\n\r\n",["para","DocBook V5.0 is not tightly coupled with some particular\r\nvalidation technology like DTDs. This also means that DocBook V5.0\r\ndocuments don't have to (and usually don't) start with a\r\ndocument type declaration (<!DOCTYPE…>) to specify the schema\r\n(DTD) to use. Instead, DocBook V5.0 instances can be easily\r\ndistinguished from other XML vocabularies by using elements in the\r\n",["uri","http://docbook.org/ns/docbook"]," namespace. This namespace is\r\nenough to distinguish DocBook from other XML based formats. But the\r\nDocBook schema evolves over time and there are several versions of\r\nDocBook (e.g. 3.1, 4.2, 4.5 and 5.0).  Since DocBook version 5.0, the\r\nactual version used is indicated in the ",["tag",{"class":"attribute"},"version"]," attribute on a root element."],"\r\n\r\n",["programlisting","<book xmlns=\"http://docbook.org/ns/docbook\"\r\n      version=\"5.0\">\r\n  …\r\n</book>"],"\r\n\r\n",["para","Future versions of DocBook documents will start with the same\r\nmarkup, except the version number will be raised, for example to 5.1\r\nor 6.0.\r\nThe namespace will remain the same until the semantics of the elements\r\nchange in a backward incompatible way, which is very unlikely to happen."],"\r\n\r\n",["para","If you create a DocBook schema customization you must change the ",["tag",{"class":"attribute"},"version"]," attribute to distinguish your\r\ncustomization from the ",["quote","official"]," DocBook.  Changing the\r\nnamespace is not recommended because that would break the processing\r\ntools.  Remember that changing namespaces is the same as renaming all\r\nelements in the namespace."],"\r\n\r\n",["para","When you customize the schema, use the following syntax to\r\nidentify your DocBook derivation:"],"\r\n\r\n",["programlisting",["replaceable","base_version"],"-[subset|extension|variant] [",["replaceable","name"],"[-",["replaceable","version"],"]?]+"],"\r\n\r\n",["para","For example:"],"\r\n\r\n",["programlisting","5.0-subset simplified-1.0\r\n5.0-variant ASMBook\r\n5.0-variant ASMBook-2006\r\n5.0-extension MathML-2.0 SVG-1.1"],"\r\n\r\n",["para","The first part of the version identifier is the version number of the\r\nDocBook schema from which you derived your customization."],"\r\n\r\n",["para","If your schema is a proper subset, you can advertise this status\r\nby using the ",["literal","subset"]," keyword in the description. If\r\nyour schema contains any markup model extensions, you can advertise\r\nthis status by using the ",["literal","extension"]," keyword. If\r\nyou'd rather not characterize your variant specifically as a subset or\r\nan extension, use the ",["literal","variant"]," keyword."],"\r\n\r\n",["para","After these keywords you may add a whitespace separated list of\r\ncustomization identifiers. Each name may be optionally followed by its\r\nversion number."],"\r\n\r\n"],"\r\n\r\n"],"\r\n\r\n",["section",{"xml:id":"faq"},"\r\n",["title","FAQ"],"\r\n\r\n",["qandaset","\r\n",["qandadiv","\r\n",["title","Authoring"],"\r\n\r\n",["qandaentry",{"xml:id":"faq-authoring-schema-association"},"\r\n",["question","\r\n",["para","How do I attach a schema to a DocBook V5.0 document when I do not\r\nwant to use DTDs and !DOCTYPE?"],"\r\n"],"\r\n",["answer","\r\n",["para","There is no standard way of associating a RELAX NG schema with a\r\ndocument. Most tools provide some mechanism for performing this\r\nassociation, consult the documentation for your application. In some\r\ntools you must specify schema manually each time you want to\r\nedit/process your document."],"\r\n"],"\r\n"],"\r\n\r\n",["qandaentry",{"xml:id":"faq-authoring-general-entities"},"\r\n",["question","\r\n",["para","How do I use entities like ",["tag",{"class":"genentity"},"ndash"]," in\r\nDocBook V5.0?"],"\r\n"],"\r\n",["answer","\r\n",["para","Modern schema languages (including RELAX NG and W3X XML Schema)\r\ndo not provide any means to define entities that can be used for easier\r\ntyping of special characters. Some editors provide functions or\r\nspecial toolbars that allow you to easily pick necessary character\r\nand insert it into document as a raw Unicode character or a numeric\r\ncharacter reference."],"\r\n",["para","Another possibility is to include entity definitions in the\r\nprolog of your document. ",["link",{"xl:href":"http://www.w3.org/2003/entities/"},"Entity definition\r\nfiles"]," are now maintained by W3C. You can reference definition\r\nfiles with entity definitions you are interested in and then reference\r\nimported entities. For example:"],"\r\n",["programlisting","<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<!DOCTYPE article [\r\n<!ENTITY % isopub SYSTEM \"http://www.w3.org/2003/entities/iso8879/isopub.ent\">\r\n%isopub;\r\n]>\r\n<article xmlns=\"http://docbook.org/ns/docbook\" version=\"5.0\">\r\n<title>DocBook V5.0 &ndash; the superb documentation format</title>","\r\n…"],"\r\n",["para","For your convenience there is also flattened entity definition\r\nfile which contains all entity definitions."],"\r\n",["programlisting","<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<!DOCTYPE article [\r\n<!ENTITY % allent SYSTEM \"http://www.w3.org/2003/entities/2007/w3centities-f.ent\">\r\n%allent;\r\n]>\r\n<article xmlns=\"http://docbook.org/ns/docbook\" version=\"5.0\">\r\n<title>DocBook V5.0 &ndash; the superb documentation format</title>","\r\n…"],"\r\n"],"\r\n"],"\r\n\r\n",["qandaentry",{"xml:id":"faq-authoring-modularization"},"\r\n",["question","\r\n",["para","How to modularize documents?"],"\r\n"],"\r\n",["answer","\r\n",["para","You can use ",["link",{"xl:href":"http://www.w3.org/TR/xinclude/"},"XInclude"]," for this\r\ntask. There is an alternative schema for DocBook V5.0 that\r\ncontains XInclude elements. This is necessary to make some XML editors\r\nhappy. This schema can be found in files that end with letters ",["quote","xi"],", e.g.\r\n",["filename","docbookxi.rnc"]," instead of\r\n",["filename","docbook.rnc"],"."],"\r\n"],"\r\n"],"\r\n\r\n",["qandaentry",{"xml:id":"faq-authoring-validating-xincludes"},"\r\n",["question","\r\n",["para","How to validate documents which are composed by XInclude?"],"\r\n"],"\r\n",["answer","\r\n",["para","If you are using XIncludes you should make sure that the final\r\ndocument after resolving all inclusions is valid DocBook V5.0\r\ninstance. This means that all XIncludes should be processed before\r\nvalidation takes place. The following command can be used to enable\r\nXInclude processing in oNVDL."],"\r\n",["screen",["command","java"]," -Dorg.apache.xerces.xni.parser.XMLParserConfiguration=org.apache.xerces.parsers.XIncludeParserConfiguration -jar ",["replaceable","/path/to/oNVDL/"],"bin/onvdl.jar ",["replaceable","/path/to/"],"docbook.nvdl document.xml"],"\r\n",["para","For JNVDL you can use switch ",["option","-xi"]," to enable XInclude processing."],"\r\n"],"\r\n"],"\r\n\r\n"],"\r\n\r\n",["qandadiv","\r\n",["title","Stylesheets"],"\r\n\r\n",["qandaentry",{"xml:id":"faq-stylesheets-future"},"\r\n",["question","\r\n",["para","Will the current DocBook XSL stylesheets (XSLT 1.0 based\r\nimplementation) be maintained and improved in the future since work on\r\na new XSLT 2.0 based implementation has started?"],"\r\n"],"\r\n",["answer","\r\n",["para","Yes, the current stylesheets (like 1.73.x) will be supported and\r\nimproved further because they are very widely deployed and work with\r\nmany existing XSLT processors."],"\r\n",["para","Surely there will be a point in a future when all new development\r\nwill be switched to the XSLT 2.0 based implementation. But this\r\nwill not happen until all features of the current stylesheets are\r\nimplemented in the new stylesheets, and until there is more than\r\none usable XSLT 2.0 processor available."],"\r\n"],"\r\n"],"\r\n\r\n"],"\r\n\r\n",["qandadiv","\r\n",["title","Schema customizations"],"\r\n\r\n",["qandaentry",{"xml:id":"faq-customization-mathml"},"\r\n",["question","\r\n",["para","How can I extend the DocBook schema with MathML elements?"],"\r\n"],"\r\n",["answer","\r\n",["para","The basic DocBook schema allows elements from the MathML namespace\r\nto appear inside the ",["tag","equation"]," element.  This means that you can\r\nvalidate a DocBook+MathML document, but MathML content will be ignored\r\nduring the validation. You will also not be able to use guided editing\r\nfor the MathML content."],"\r\n",["para","If you need strict validation of MathML content or guided\r\nediting for MathML, you can easily extend the base DocBook schema with\r\nthe MathML schema."],"\r\n",["procedure","\r\n",["title","Extending the DocBook schema with the MathML schema"],"\r\n",["step","\r\n",["para","Download the MathML RELAX NG schema from ",["link",{"xl:href":"http://yupotan.sppd.ne.jp/relax-ng/mml2.html"}]," and unpack it\r\nsomewhere (e.g. into a ",["filename","mathml"]," subdirectory)."],"\r\n"],"\r\n",["step","\r\n",["para","Create a schema customization in compact syntax—",["filename","dbmathml.rnc"],":"],"\r\n",["programlisting",{"language":"rnc"},"namespace html = \"http://www.w3.org/1999/xhtml\"\r\nnamespace mml = \"http://www.w3.org/1998/Math/MathML\"\r\nnamespace db = \"http://docbook.org/ns/docbook\"\r\n\r\ninclude \"/path/to/docbook.rnc\" {\r\n  db._any.mml = external \"mathml/mathml2.rnc\"\r\n  db._any =\r\n    element * - (db:* | html:* | mml:*) {\r\n      (attribute * { text }\r\n       | text\r\n       | db._any)*\r\n    }\r\n}"],"\r\n",["para","Or, alternatively, you can use the XML syntax of RELAX NG—",["filename","dbmathml.rng"],":"],"\r\n",["programlisting",{"language":"rng"},"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<grammar xmlns=\"http://relaxng.org/ns/structure/1.0\">\r\n\r\n<include href=\"/path/to/docbook.rng\">\r\n  <define name=\"db._any.mml\">\r\n    <externalRef href=\"mathml/mathml2.rng\"/>\r\n  </define>\r\n\r\n  <define name=\"db._any\">\r\n    <element>\r\n      <anyName>\r\n        <except>\r\n          <nsName ns=\"http://docbook.org/ns/docbook\"/>\r\n          <nsName ns=\"http://www.w3.org/1999/xhtml\"/>\r\n          <nsName ns=\"http://www.w3.org/1998/Math/MathML\"/>\r\n        </except>\r\n      </anyName>\r\n      <zeroOrMore>\r\n        <choice>\r\n          <attribute>\r\n            <anyName/>\r\n          </attribute>\r\n          <text/>\r\n          <ref name=\"db._any\"/>\r\n        </choice>\r\n      </zeroOrMore>\r\n    </element>\r\n  </define>\r\n</include>\r\n\r\n</grammar>"],"\r\n"],"\r\n",["step","\r\n",["para","Now use the customized schema (",["filename","dbmathml.rnc"],"\r\nor ",["filename","dbmathml.rng"],") instead of the original\r\nDocBook schema."],"\r\n"],"\r\n"],"\r\n"],"\r\n"],"\r\n\r\n",["qandaentry",{"xml:id":"faq-customization-svg"},"\r\n",["question","\r\n",["para","How can I extend the DocBook schema with SVG elements?"],"\r\n"],"\r\n",["answer","\r\n",["para","The situation is the same as with MathML support. You can use\r\nelements from the SVG namespace inside the ",["tag","imageobject"],"\r\nelement."],"\r\n",["procedure","\r\n",["title","Extending the DocBook schema with the SVG schema"],"\r\n",["step","\r\n",["para","Download the SVG RELAX NG schema from ",["link",{"xl:href":"http://www.w3.org/Graphics/SVG/1.1/rng/rng.zip"}]," and unpack it\r\nsomewhere (e.g. into an ",["filename","svg"]," subdirectory)."],"\r\n"],"\r\n",["step","\r\n",["para","Create a schema customization in compact syntax—",["filename","dbsvg.rnc"],":"],"\r\n",["programlisting",{"language":"rnc"},"namespace html = \"http://www.w3.org/1999/xhtml\"\r\nnamespace db = \"http://docbook.org/ns/docbook\"\r\nnamespace svg = \"http://www.w3.org/2000/svg\"\r\n\r\ninclude \"/path/to/docbook.rnc\" {\r\n  db._any.svg = external \"svg/svg11.rnc\"\r\n  db._any =\r\n    element * - (db:* | html:* | svg:*) {\r\n      (attribute * { text }\r\n       | text\r\n       | db._any)*\r\n    }\r\n}"],"\r\n",["para","Or, alternatively, you can use the XML syntax of RELAX NG—",["filename","dbsvg.rng"],":"],"\r\n",["programlisting",{"language":"rng"},"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<grammar xmlns=\"http://relaxng.org/ns/structure/1.0\">\r\n\r\n<include href=\"/path/to/docbook.rng\">\r\n  <define name=\"db._any.svg\">\r\n    <externalRef href=\"svg/svg11.rng\"/>\r\n  </define>\r\n\r\n  <define name=\"db._any\">\r\n    <element>\r\n      <anyName>\r\n        <except>\r\n          <nsName ns=\"http://docbook.org/ns/docbook\"/>\r\n          <nsName ns=\"http://www.w3.org/1999/xhtml\"/>\r\n          <nsName ns=\"http://www.w3.org/2000/svg\"/>\r\n        </except>\r\n      </anyName>\r\n      <zeroOrMore>\r\n        <choice>\r\n          <attribute>\r\n            <anyName/>\r\n          </attribute>\r\n          <text/>\r\n          <ref name=\"db._any\"/>\r\n        </choice>\r\n      </zeroOrMore>\r\n    </element>\r\n  </define>\r\n</include>\r\n\r\n</grammar>"],"\r\n"],"\r\n",["step","\r\n",["para","Now use the customized schema (",["filename","dbsvg.rnc"],"\r\nor ",["filename","dbsvg.rng"],") instead of the original\r\nDocBook schema."],"\r\n"],"\r\n"],"\r\n"],"\r\n"],"\r\n\r\n",["qandaentry",{"xml:id":"faq-customization-mathml-svg"},"\r\n",["question","\r\n",["para","Is it possible to use the previous two customizations for MathML\r\nand SVG together?"],"\r\n"],"\r\n",["answer","\r\n",["para","Yes, you can create a special schema customization that combines\r\nboth MathML and SVG with the DocBook schema. In compact syntax, the merged\r\nschema is:"],"\r\n",["programlisting",{"language":"rnc"},"namespace html = \"http://www.w3.org/1999/xhtml\"\r\nnamespace mml = \"http://www.w3.org/1998/Math/MathML\"\r\nnamespace db = \"http://docbook.org/ns/docbook\"\r\nnamespace svg = \"http://www.w3.org/2000/svg\"\r\n\r\ninclude \"/path/to/docbook.rnc\" {\r\n  db._any.mml = external \"mahtml/mathml2.rnc\"\r\n  db._any.svg = external \"svg/svg11.rnc\"\r\n  db._any =\r\n    element * - (db:* | html:* | mml:* | svg:*) {\r\n      (attribute * { text }\r\n       | text\r\n       | db._any)*\r\n    }\r\n}"],"\r\n",["para","Or alternatively in the full RELAX NG syntax:"],"\r\n",["programlisting",{"language":"rng"},"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<grammar xmlns=\"http://relaxng.org/ns/structure/1.0\">\r\n\r\n<include href=\"/path/to/docbook.rng\">\r\n  <define name=\"db._any.mml\">\r\n    <externalRef href=\"mathml/mathml2.rng\"/>\r\n  </define>\r\n\r\n  <define name=\"db._any.svg\">\r\n    <externalRef href=\"svg/svg11.rng\"/>\r\n  </define>\r\n\r\n  <define name=\"db._any\">\r\n    <element>\r\n      <anyName>\r\n        <except>\r\n          <nsName ns=\"http://docbook.org/ns/docbook\"/>\r\n          <nsName ns=\"http://www.w3.org/1999/xhtml\"/>\r\n          <nsName ns=\"http://www.w3.org/1998/Math/MathML\"/>\r\n          <nsName ns=\"http://www.w3.org/2000/svg\"/>\r\n        </except>\r\n      </anyName>\r\n      <zeroOrMore>\r\n        <choice>\r\n          <attribute>\r\n            <anyName/>\r\n          </attribute>\r\n          <text/>\r\n          <ref name=\"db._any\"/>\r\n        </choice>\r\n      </zeroOrMore>\r\n    </element>\r\n  </define>\r\n</include>\r\n\r\n</grammar>"],"\r\n"],"\r\n"],"\r\n\r\n",["qandaentry",{"xml:id":"faq-customization-links"},"\r\n",["question","\r\n",["para","Are there any other examples of schema customization\r\navailable?"],"\r\n"],"\r\n",["answer","\r\n",["para","Sure. Some of the are listed bellow:"],"\r\n",["itemizedlist","\r\n",["listitem",["para",["link",{"xl:href":"http://www.w3.org/TR/xml-i18n-bp/#docbook-plus-its"},"Sample\r\ncustomization of ITS and DocBook"]]],"\r\n",["listitem",["para",["link",{"xl:href":"http://wiki.docbook.org/topic/DocbookSchemas"},"Examples on\r\nDocBook WiKi"]]],"\r\n"],"\r\n"],"\r\n"],"\r\n\r\n"],"\r\n\r\n",["qandadiv","\r\n",["title","Tool specific problems"],"\r\n\r\n",["qandaentry",{"xml:id":"faq-tools-xmlspy-xmlid"},"\r\n",["question","\r\n",["para","I'm using Altova XMLSpy to validate DocBook V5.0 instances\r\nagainst the W3C XML Schema (",["filename","docbook.xsd"],"). XMLSpy\r\ncomplains about undefined ",["tag",{"class":"attribute"},"xml:id"],"\r\nattributes?"],"\r\n"],"\r\n",["answer","\r\n",["para","XMLSpy always uses its own bundled version of\r\n",["filename","xml.xsd"]," which unfortunately doesn't define the ",["tag",{"class":"attribute"},"xml:id"]," attribute. The bundled version of\r\n",["filename","xml.xsd"]," is hardwired into the program and cannot\r\nbe replaced by a newer version. To solve this problem you must upgrade\r\nto version 2006 SP1."],"\r\n"],"\r\n"],"\r\n\r\n"],"\r\n\r\n"],"\r\n"],"\r\n\r\n",["bibliography",{"xml:id":"references"},"\r\n\r\n",["bibliomixed","\r\n",["abbrev","RNCTUT"],"\r\nClark, James – Cowan, John – MURATA, Makoto: ",["title","RELAX NG Compact Syntax Tutorial"],".\r\nWorking Draft, 26 March 2003. OASIS. ",["bibliomisc",["link",{"xl:href":"http://relaxng.org/compact-tutorial-20030326.html"}]],"\r\n"],"\r\n\r\n",["bibliomixed","\r\n",["abbrev","NVDLTUT"],"\r\nNálevka, Petr:\r\n",["title","NVDL Tutorial"],".\r\n",["bibliomisc",["link",{"xl:href":"http://jnvdl.sourceforge.net/tutorial.html"}]],"\r\n"],"\r\n\r\n",["bibliomixed","\r\n",["abbrev","XMLID"],"\r\nMarsh, Jonathan – \r\nVeillard, Daniel –\r\nWalsh, Norman: ",["title","xml:id Version 1.0"],". W3C Recommendation, 9 September 2005. ",["bibliomisc",["link",{"xl:href":"http://www.w3.org/TR/xml-id/"}]],"\r\n"],"\r\n\r\n",["bibliomixed","\r\n",["abbrev","DB5SPEC"],"\r\nNorman, Walsh: ",["title","The DocBook Schema"],".\r\nWorking Draft 5.0a1, OASIS, 29 June 2005.\r\n",["bibliomisc",["link",{"xl:href":"http://www.docbook.org/specs/wd-docbook-docbook-5.0a1.html"}]],"\r\n"],"\r\n\r\n"],"\r\n\r\n"]